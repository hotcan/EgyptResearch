<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç¬¬äºŒå¤©æ€è€ƒ Â· å¤åŸƒåŠæœä»£å²</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Cinzel:wght@400;600&family=Noto+Serif+SC:wght@300;400;600&display=swap" rel="stylesheet">
<style>
/* â”€â”€ SITE NAV â”€â”€ */
.site-nav {
  position: relative; z-index: 20;
  display: flex; gap: 20px; align-items: center;
  padding: 16px 24px; font-size: 12px;
  border-bottom: 1px solid rgba(200,151,58,.12);
  background: rgba(10,8,6,.6); backdrop-filter: blur(8px);
  flex-wrap: wrap;
}
.site-nav a {
  color: rgba(200,151,58,.6); text-decoration: none;
  font-family: 'Cinzel', serif; letter-spacing: 1px; transition: color .2s;
}
.site-nav a:hover { color: #C9A84C; }
.site-nav-sep { color: rgba(200,151,58,.25); }
.site-nav-cur { color: rgba(212,196,160,.5); font-family: 'Cinzel', serif; letter-spacing: 1px; }

/* â”€â”€ CONTEXT STRIP â”€â”€ */
.context-strip { position: relative; z-index: 10; max-width: 1200px; margin: 0 auto; padding: 20px 20px 0; }
.context-card {
  background: rgba(26,58,92,.15); border: 1px solid rgba(200,151,58,.18);
  border-left: 3px solid rgba(200,151,58,.5); padding: 14px 20px;
  display: flex; gap: 20px; align-items: flex-start; flex-wrap: wrap;
}
.context-eyebrow { font-family: 'Cinzel', serif; font-size: 10px; letter-spacing: 3px; color: #C9A84C; opacity: .7; margin-bottom: 4px; }
.context-text { font-size: 13px; color: rgba(212,196,160,.75); line-height: 1.7; flex: 1; min-width: 240px; }
.context-link {
  align-self: center; white-space: nowrap; font-family: 'Cinzel', serif;
  font-size: 11px; letter-spacing: 1px; color: #C9A84C; text-decoration: none;
  border: 1px solid rgba(200,151,58,.3); padding: 6px 14px; transition: all .2s;
}
.context-link:hover { background: rgba(200,151,58,.1); }
</style>
<style>
:root {
  --gold: #C9A84C; --gold-light: #F0D080; --gold-dark: #8B6914;
  --lapis: #1A3A5C; --lapis-light: #2A5480;
  --sand: #F5E6C8; --sand-dark: #D4C4A0; --papyrus: #EDD9A3;
  --black: #0A0806; --red-ancient: #8B2020; --teal: #1A7A6E;
  --bg: #0D0B08;
  --era-early: #7A5C2A; --era-old: #C4960A; --era-middle: #2A6090;
  --era-new: #C9A84C; --era-late: #5A3A70; --era-ptolemaic: #1A7A6E;
}

* { margin: 0; padding: 0; box-sizing: border-box; }
html { scroll-behavior: smooth; }
body {
  background: var(--bg); color: var(--sand);
  font-family: 'Noto Serif SC', serif; overflow-x: hidden; min-height: 100vh;
}
body::before {
  content: ''; position: fixed; inset: 0; pointer-events: none;
  background:
    radial-gradient(ellipse 80% 60% at 15% -10%, rgba(201,168,76,.06) 0%, transparent 50%),
    radial-gradient(ellipse 60% 50% at 90% 110%, rgba(26,58,92,.08) 0%, transparent 45%);
}

/* â”€â”€ STARS â”€â”€ */
.stars { position: fixed; inset: 0; pointer-events: none; z-index: 0; overflow: hidden; }
.star {
  position: absolute; border-radius: 50%; background: #fff;
  animation: twinkle var(--d, 4s) var(--delay, 0s) infinite ease-in-out alternate;
  opacity: 0;
}
@keyframes twinkle { 0% { opacity: 0; } 50% { opacity: var(--o, .4); } 100% { opacity: 0; } }

/* â”€â”€ HEADER â”€â”€ */
.main-header {
  position: relative; z-index: 5; text-align: center;
  padding: 48px 20px 32px; max-width: 900px; margin: 0 auto;
}
.hieroglyph-band {
  font-size: 24px; letter-spacing: 8px; opacity: .25; margin-bottom: 16px;
  color: var(--gold); font-family: serif;
}
.main-header h1 {
  font-family: 'Cinzel Decorative', serif; font-size: clamp(20px, 4vw, 38px);
  color: var(--gold-light); letter-spacing: 2px; margin-bottom: 10px; line-height: 1.2;
}
.main-header h1 span {
  display: block; font-family: 'Noto Serif SC', serif; font-size: clamp(14px, 2vw, 20px);
  color: rgba(212,196,160,.6); letter-spacing: 6px; font-weight: 300; margin-top: 6px;
}
.subtitle {
  font-family: 'Cinzel', serif; font-size: 11px; letter-spacing: 4px;
  color: rgba(201,168,76,.5); margin-top: 14px;
}

/* â”€â”€ NAV TABS â”€â”€ */
.nav-tabs {
  position: relative; z-index: 5;
  display: flex; gap: 2px; max-width: 900px; margin: 0 auto 32px;
  padding: 0 20px; flex-wrap: wrap;
}
.nav-tab {
  flex: 1; min-width: 120px; padding: 12px 16px; background: rgba(26,58,92,.15);
  border: 1px solid rgba(201,168,76,.15); color: rgba(212,196,160,.5);
  font-family: 'Cinzel', serif; font-size: 11px; letter-spacing: 2px;
  cursor: pointer; transition: all .3s; white-space: nowrap; text-align: center;
}
.nav-tab:hover { background: rgba(201,168,76,.08); color: var(--gold); border-color: rgba(201,168,76,.3); }
.nav-tab.active { background: rgba(201,168,76,.12); color: var(--gold-light); border-color: rgba(201,168,76,.4); border-bottom-color: transparent; }

/* â”€â”€ CONTENT AREA â”€â”€ */
.content-area { position: relative; z-index: 5; max-width: 1200px; margin: 0 auto; padding: 0 20px 80px; }
.tab-content { display: none; }
.tab-content.active { display: block; }

/* â”€â”€ SECTION LABEL â”€â”€ */
.section-label {
  font-family: 'Cinzel', serif; font-size: 10px; letter-spacing: 4px;
  color: rgba(201,168,76,.5); margin-bottom: 24px; padding-bottom: 12px;
  border-bottom: 1px solid rgba(201,168,76,.1);
}

/* â”€â”€ ERA FILTERS â”€â”€ */
.filter-row { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 32px; }
.filter-pill {
  padding: 6px 14px; background: transparent; border: 1px solid rgba(201,168,76,.2);
  color: rgba(212,196,160,.5); font-family: 'Cinzel', serif; font-size: 10px;
  letter-spacing: 2px; cursor: pointer; transition: all .2s; white-space: nowrap;
}
.filter-pill:hover { border-color: rgba(201,168,76,.5); color: var(--sand); }
.filter-pill.active { color: var(--sand); }
.filter-pill[data-era="all"].active { background: rgba(201,168,76,.12); border-color: var(--gold); color: var(--gold); }
.filter-pill[data-era="early"].active { background: rgba(122,92,42,.2); border-color: var(--era-early); color: #C8A060; }
.filter-pill[data-era="old"].active { background: rgba(196,150,10,.15); border-color: var(--era-old); color: var(--era-old); }
.filter-pill[data-era="middle"].active { background: rgba(42,96,144,.2); border-color: var(--era-middle); color: #5A9FD4; }
.filter-pill[data-era="new"].active { background: rgba(201,168,76,.15); border-color: var(--era-new); color: var(--gold-light); }
.filter-pill[data-era="late"].active { background: rgba(90,58,112,.2); border-color: var(--era-late); color: #9A6AC0; }
.filter-pill[data-era="ptolemaic"].active { background: rgba(26,122,110,.2); border-color: var(--era-ptolemaic); color: #3AB8A8; }

/* â”€â”€ PHARAOH GRID â”€â”€ */
.pharaoh-grid {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 20px;
}
.pharaoh-card {
  background: linear-gradient(145deg, rgba(26,58,92,.35), rgba(10,8,6,.75));
  border: 1px solid rgba(201,168,76,.2); cursor: pointer;
  transition: all .35s cubic-bezier(.175,.885,.32,1.275); position: relative; overflow: hidden;
}
.pharaoh-card:hover {
  border-color: var(--gold); transform: translateY(-4px);
  box-shadow: 0 12px 40px rgba(201,168,76,.15);
}
.pharaoh-card.has-papyrus { box-shadow: 0 0 0 1px rgba(201,168,76,.25), inset 0 0 30px rgba(201,168,76,.04); }
.pharaoh-card.has-papyrus:hover { box-shadow: 0 12px 40px rgba(201,168,76,.25), 0 0 0 1px var(--gold); }
.pharaoh-card.hidden { display: none; }

.pharaoh-avatar {
  padding: 24px 20px 16px; text-align: center; position: relative;
  border-bottom: 1px solid rgba(201,168,76,.1);
}
.pharaoh-glyph { font-size: 40px; display: block; margin-bottom: 8px; opacity: .8; }
.pharaoh-era-badge {
  font-family: 'Cinzel', serif; font-size: 9px; letter-spacing: 1.5px;
  padding: 2px 8px; border: 1px solid; border-radius: 1px; display: inline-block;
}

.pharaoh-info { padding: 14px 18px 16px; }
.pharaoh-name-zh { font-size: 16px; font-weight: 600; color: var(--sand); margin-bottom: 3px; }
.pharaoh-name-latin { font-family: 'Cinzel', serif; font-size: 10px; letter-spacing: 1px; color: rgba(212,196,160,.45); margin-bottom: 8px; }
.pharaoh-meta { font-size: 11px; color: rgba(212,196,160,.45); margin-bottom: 8px; line-height: 1.5; }
.pharaoh-achievement { font-size: 12px; color: rgba(212,196,160,.65); line-height: 1.6; margin-bottom: 10px; }

.papyrus-badges { display: flex; flex-wrap: wrap; gap: 4px; padding-top: 10px; border-top: 1px solid rgba(201,168,76,.12); }
.papyrus-badge {
  font-size: 10px; padding: 2px 7px;
  background: rgba(201,168,76,.1); border: 1px solid rgba(201,168,76,.35);
  color: var(--gold); font-family: 'Cinzel', serif; letter-spacing: .5px;
}

/* â”€â”€ DYNASTY TIMELINE TAB â”€â”€ */
.dynasty-timeline-wrap { margin: 0 0 32px; overflow-x: auto; }
.dynasty-rail { display: flex; height: 64px; min-width: 700px; gap: 2px; }
.era-block { position: relative; cursor: pointer; transition: filter .2s; }
.era-block:hover .era-block-inner { opacity: 1; filter: brightness(1.15); }
.era-block-inner {
  height: 100%; opacity: .7; display: flex; flex-direction: column;
  align-items: center; justify-content: center; gap: 3px; transition: opacity .2s; padding: 0 6px;
}
.era-label-zh { font-family: 'Cinzel', serif; font-size: 11px; color: var(--sand); letter-spacing: 2px; white-space: nowrap; }
.era-label-period { font-size: 9px; color: rgba(245,230,200,.55); white-space: nowrap; }

.pharaoh-dots-row { position: relative; height: 36px; min-width: 700px; margin-top: 2px; }
.pharaoh-dot {
  position: absolute; top: 8px; width: 14px; height: 14px; border-radius: 50%;
  border: 2px solid var(--bg); cursor: pointer; transform: translateX(-50%);
  transition: transform .2s, box-shadow .2s; z-index: 2;
}
.pharaoh-dot:hover { transform: translateX(-50%) scale(1.5); z-index: 10; }
.pharaoh-dot.has-papyrus { box-shadow: 0 0 0 2px var(--gold), 0 0 10px rgba(201,168,76,.6); }
.pharaoh-dot-tip {
  display: none; position: absolute; top: -32px; left: 50%; transform: translateX(-50%);
  background: rgba(10,8,6,.9); border: 1px solid rgba(201,168,76,.3); padding: 4px 8px;
  font-family: 'Cinzel', serif; font-size: 9px; color: var(--gold); white-space: nowrap; pointer-events: none;
}
.pharaoh-dot:hover .pharaoh-dot-tip { display: block; }

.era-detail-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 16px; margin-top: 24px; }
.era-detail-card {
  border: 1px solid rgba(201,168,76,.15); border-left-width: 3px;
  background: rgba(26,58,92,.08); padding: 18px 20px;
}
.era-detail-header { display: flex; justify-content: space-between; align-items: baseline; gap: 12px; margin-bottom: 8px; flex-wrap: wrap; }
.era-detail-name { font-family: 'Cinzel', serif; font-size: 13px; color: var(--sand); letter-spacing: 1px; }
.era-detail-period { font-size: 11px; color: rgba(212,196,160,.4); font-family: 'Cinzel', serif; white-space: nowrap; }
.era-detail-desc { font-size: 12px; color: rgba(212,196,160,.6); line-height: 1.7; margin-bottom: 14px; }
.era-pharaoh-chips { display: flex; gap: 6px; flex-wrap: wrap; }
.era-pharaoh-chip {
  font-size: 11px; padding: 3px 10px; background: rgba(201,168,76,.08);
  border: 1px solid rgba(201,168,76,.18); color: rgba(212,196,160,.65);
  cursor: pointer; transition: all .2s; font-family: 'Cinzel', serif; letter-spacing: .5px;
}
.era-pharaoh-chip:hover { background: rgba(201,168,76,.15); color: var(--gold); border-color: rgba(201,168,76,.4); }
.era-pharaoh-chip.linked { border-color: rgba(201,168,76,.4); color: var(--gold); }

/* â”€â”€ PAPYRUS ORIGINS TAB â”€â”€ */
.tab-intro { font-size: 14px; color: rgba(212,196,160,.6); line-height: 1.8; max-width: 700px; margin-bottom: 32px; }
.papyrus-origin-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
.papyrus-origin-card {
  border: 1px solid rgba(201,168,76,.25); border-top-width: 2px;
  background: linear-gradient(160deg, rgba(26,58,92,.18), rgba(10,8,6,.8)); padding: 22px 24px;
  position: relative;
}
.papyrus-origin-header { display: flex; gap: 14px; align-items: flex-start; margin-bottom: 14px; flex-wrap: wrap; }
.papyrus-origin-icon { font-size: 36px; flex-shrink: 0; opacity: .75; }
.papyrus-origin-names { flex: 1; }
.papyrus-origin-name { font-size: 17px; font-weight: 600; color: var(--sand); margin-bottom: 2px; }
.papyrus-origin-en { font-family: 'Cinzel', serif; font-size: 10px; letter-spacing: 1px; color: rgba(212,196,160,.4); }
.dynasty-badge {
  font-family: 'Cinzel', serif; font-size: 9px; letter-spacing: 1px; color: var(--sand);
  padding: 3px 9px; margin-top: 4px; display: inline-block; opacity: .9;
}
.papyrus-origin-year { font-family: 'Cinzel', serif; font-size: 11px; color: var(--gold); letter-spacing: 1px; margin-bottom: 6px; }
.papyrus-origin-symbol { font-size: 12px; color: rgba(212,196,160,.5); margin-bottom: 12px; letter-spacing: .5px; }
.papyrus-origin-note { font-size: 13px; color: rgba(212,196,160,.65); line-height: 1.75; margin-bottom: 16px; }

.papyrus-timeline-bar { position: relative; height: 6px; background: rgba(201,168,76,.07); border: 1px solid rgba(201,168,76,.12); margin: 0 0 6px; }
.papyrus-timeline-fill { position: absolute; top: 0; bottom: 0; }
.papyrus-timeline-fill.dot { width: 3px; background: var(--gold); }
.papyrus-timeline-fill.full { left: 0; right: 0; background: linear-gradient(to right, rgba(201,168,76,.1), rgba(201,168,76,.35), rgba(201,168,76,.1)); }
.papyrus-timeline-label { font-size: 9px; color: rgba(201,168,76,.5); font-family: 'Cinzel', serif; letter-spacing: 1px; }

.papyrus-connected { margin-top: 14px; padding-top: 14px; border-top: 1px solid rgba(201,168,76,.12); }
.papyrus-connected-label { font-family: 'Cinzel', serif; font-size: 9px; letter-spacing: 2px; color: rgba(201,168,76,.5); margin-bottom: 8px; }
.pharaoh-chip {
  display: inline-block; font-size: 11px; padding: 3px 10px; margin: 3px 4px 3px 0;
  background: rgba(201,168,76,.08); border: 1px solid rgba(201,168,76,.2);
  color: rgba(212,196,160,.7); cursor: pointer; transition: all .2s; font-family: 'Cinzel', serif;
}
.pharaoh-chip:hover { background: rgba(201,168,76,.18); color: var(--gold); border-color: var(--gold); }

/* â”€â”€ HISTORY EVENTS TAB â”€â”€ */
.event-cards-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(340px, 1fr)); gap: 20px; }
.event-card {
  background: linear-gradient(145deg, rgba(26,58,92,.2), rgba(10,8,6,.8));
  border: 1px solid rgba(201,168,76,.15); overflow: hidden;
}
.event-card-header { padding: 18px 22px 14px; border-bottom: 1px solid rgba(201,168,76,.08); }
.event-num { font-family: 'Cinzel', serif; font-size: 9px; letter-spacing: 3px; color: rgba(201,168,76,.45); margin-bottom: 6px; }
.event-title { font-size: 16px; font-weight: 600; color: var(--sand); line-height: 1.3; margin-bottom: 4px; }
.event-year { font-family: 'Cinzel', serif; font-size: 11px; color: var(--gold); letter-spacing: 1px; }
.event-card-body { padding: 16px 22px 18px; font-size: 13px; color: rgba(212,196,160,.65); line-height: 1.8; }
.event-pharaoh-row { display: flex; gap: 6px; flex-wrap: wrap; margin-top: 14px; padding-top: 12px; border-top: 1px solid rgba(201,168,76,.1); }

/* â”€â”€ MODAL â”€â”€ */
.modal-overlay {
  display: none; position: fixed; inset: 0; background: rgba(0,0,0,.75);
  backdrop-filter: blur(4px); z-index: 100; align-items: center; justify-content: center; padding: 20px;
}
.modal-overlay.open { display: flex; }
.modal {
  background: #0F0D0A; border: 1px solid rgba(201,168,76,.3); max-width: 600px; width: 100%;
  max-height: 88vh; overflow-y: auto; position: relative;
  animation: modalIn .3s cubic-bezier(.175,.885,.32,1.275);
}
@keyframes modalIn { from { opacity: 0; transform: scale(.92) translateY(12px); } to { opacity: 1; transform: none; } }
.modal-close {
  position: sticky; top: 12px; float: right; margin: 12px 16px 0 0;
  background: rgba(201,168,76,.1); border: 1px solid rgba(201,168,76,.25); color: var(--gold);
  width: 32px; height: 32px; cursor: pointer; font-size: 14px; z-index: 10;
  display: flex; align-items: center; justify-content: center;
}
.modal-close:hover { background: rgba(201,168,76,.2); }
.modal-header { padding: 28px 28px 0; }
.modal-glyph { font-size: 48px; margin-bottom: 12px; display: block; opacity: .75; }
.modal-name-zh { font-size: 24px; font-weight: 600; color: var(--sand); margin-bottom: 4px; }
.modal-name-latin { font-family: 'Cinzel', serif; font-size: 12px; letter-spacing: 2px; color: rgba(212,196,160,.45); margin-bottom: 12px; }
.modal-meta-row { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
.modal-badge {
  font-family: 'Cinzel', serif; font-size: 10px; letter-spacing: 1px; padding: 3px 10px;
  border: 1px solid; display: inline-block;
}
.modal-body { padding: 20px 28px 28px; }
.modal-section { margin-bottom: 22px; }
.modal-section-label {
  font-family: 'Cinzel', serif; font-size: 9px; letter-spacing: 3px; color: rgba(201,168,76,.5);
  margin-bottom: 10px; padding-bottom: 6px; border-bottom: 1px solid rgba(201,168,76,.1);
}
.modal-note { font-size: 14px; color: rgba(212,196,160,.75); line-height: 1.85; }
.modal-facts { list-style: none; display: grid; gap: 7px; }
.modal-facts li { font-size: 13px; color: rgba(212,196,160,.6); padding-left: 16px; position: relative; line-height: 1.6; }
.modal-facts li::before { content: 'â€”'; position: absolute; left: 0; color: var(--gold); opacity: .4; }
.attr-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.attr-item { background: rgba(26,58,92,.15); border: 1px solid rgba(201,168,76,.1); padding: 10px 14px; }
.attr-label { font-family: 'Cinzel', serif; font-size: 9px; letter-spacing: 2px; color: rgba(201,168,76,.45); margin-bottom: 4px; }
.attr-value { font-size: 13px; color: rgba(212,196,160,.75); line-height: 1.5; }
.papyrus-link-item {
  display: flex; gap: 12px; align-items: flex-start;
  background: rgba(201,168,76,.06); border: 1px solid rgba(201,168,76,.15); padding: 12px 14px; margin-bottom: 8px;
}
.papyrus-link-icon { font-size: 22px; flex-shrink: 0; opacity: .7; }
.papyrus-link-name { font-size: 13px; font-weight: 600; color: var(--gold); margin-bottom: 2px; }
.papyrus-link-symbol { font-size: 11px; color: rgba(212,196,160,.5); }

@media (max-width: 640px) {
  .pharaoh-grid { grid-template-columns: 1fr 1fr; }
  .era-detail-grid { grid-template-columns: 1fr; }
  .papyrus-origin-grid { grid-template-columns: 1fr; }
  .event-cards-grid { grid-template-columns: 1fr; }
  .attr-grid { grid-template-columns: 1fr; }
  .nav-tabs { flex-direction: column; }
  .nav-tab { min-width: unset; }
}
</style>
</head>
<body>

<div class="stars" id="stars"></div>

<nav class="site-nav">
  <a href="../../../index.html">æ—…è¡Œç›®å½•</a>
  <span class="site-nav-sep">/</span>
  <a href="../index.html">ç¬¬äºŒå¤©</a>
  <span class="site-nav-sep">/</span>
  <span class="site-nav-cur">æ€è€ƒ Â· æœä»£å²</span>
</nav>

<div class="context-strip">
  <div class="context-card">
    <div style="flex:1; min-width:240px;">
      <div class="context-eyebrow">Day 02 Â· Think Â· 2026.02.23</div>
      <p class="context-text">ä»å“ˆåˆ©åˆ©å¸‚åœºå¸¦å›å››å¹…èè‰çº¸ç”»çš„é‚£ä¸€åˆ»ï¼Œæˆ‘æƒ³çŸ¥é“è¿™äº›ç¬¦å·èƒŒåæ˜¯å“ªæ®µå†å²åœ¨è¯´è¯ã€‚è¿™é‡Œæ˜¯å¤åŸƒåŠæœä»£å²çš„å¯äº¤äº’ç‰ˆæœ¬â€”â€”å¸¦æœ‰ âœ¦ æ ‡è®°çš„æ³•è€ä¸ä½ çš„å››å¹…ç”»ç›´æ¥ç›¸å…³ã€‚</p>
    </div>
    <a class="context-link" href="../action/index.html">æŸ¥çœ‹ç¬¬äºŒå¤©è¡Œç¨‹ â†’</a>
  </div>
</div>

<header class="main-header">
  <div class="hieroglyph-band">ğ“‡³ ğ“…ƒ ğ“‰´ â–³ ğ“†„ â˜€ï¸ ğ“ƒ€ ğŸ›ï¸ ğŸŒº</div>
  <h1 data-key="days.1.think_title">DYNASTIA AEGYPTI<span>å¤ åŸƒ åŠ æœ ä»£ å²</span></h1>
  <p class="subtitle" data-key="days.1.think_subtitle">Pharaohs Â· Dynasties Â· Papyrus Origins</p>
</header>

<div class="nav-tabs">
  <button class="nav-tab active" onclick="switchTab('pharaohs', this)">ğ“…ƒ æ³•è€å›¾è°±</button>
  <button class="nav-tab" onclick="switchTab('timeline', this)">ğ“‡³ æœä»£æ—¶é—´çº¿</button>
  <button class="nav-tab" onclick="switchTab('papyrus', this)">ğ“‹´ èè‰çº¸æº¯æº</button>
  <button class="nav-tab" onclick="switchTab('events', this)">ğ“ å†å²å¤§äº‹</button>
</div>

<div class="content-area">

  <!-- TAB 1: PHARAOH GRID -->
  <div class="tab-content active" id="tab-pharaohs">
    <div class="section-label">PHARAOH ATLAS Â· å¸¦ âœ¦ æ ‡è®°çš„æ³•è€ä¸ä½ è´­ä¹°çš„èè‰çº¸ç”»ç›´æ¥ç›¸å…³</div>
    <div class="filter-row" id="era-filters"></div>
    <div class="pharaoh-grid" id="pharaoh-grid"></div>
  </div>

  <!-- TAB 2: DYNASTY TIMELINE -->
  <div class="tab-content" id="tab-timeline">
    <div class="section-label">DYNASTY TIMELINE Â· å…¬å…ƒå‰ 3100 å¹´è‡³å…¬å…ƒå‰ 30 å¹´</div>
    <div class="dynasty-timeline-wrap">
      <div class="dynasty-rail" id="dynasty-rail"></div>
      <div class="pharaoh-dots-row" id="pharaoh-dots"></div>
    </div>
    <div class="era-detail-grid" id="era-details"></div>
  </div>

  <!-- TAB 3: PAPYRUS ORIGINS -->
  <div class="tab-content" id="tab-papyrus">
    <div class="section-label">PAPYRUS ORIGINS Â· å››å¹…èè‰çº¸çš„æœä»£æº¯æº</div>
    <p class="tab-intro">ä»å“ˆåˆ©åˆ©å¸‚åœºå¸¦å›æ¥çš„å››å¼ çº¸ï¼Œä¸åªæ˜¯è£…é¥°å“ã€‚æ¯ä¸€å¹…ç”»éƒ½æœ‰ä¸€æ¡ç©¿è¶Šæ•°åƒå¹´çš„å†å²çº¿ç´¢ï¼Œè¿æ¥ç€å¤åŸƒåŠæœ€æ ¸å¿ƒçš„ç‹æœä¸ç¬¦å·ä½“ç³»ã€‚</p>
    <div class="papyrus-origin-grid" id="papyrus-origin-grid"></div>
  </div>

  <!-- TAB 4: HISTORY EVENTS -->
  <div class="tab-content" id="tab-events">
    <div class="section-label">HISTORY EVENTS Â· å…­ä¸ªæ”¹å˜åŸƒåŠçš„å†å²æ—¶åˆ»</div>
    <div class="event-cards-grid" id="event-cards"></div>
  </div>

</div>

<!-- MODAL -->
<div class="modal-overlay" id="modal-overlay" onclick="handleOverlayClick(event)">
  <div class="modal" id="modal">
    <button class="modal-close" onclick="closeModal()">âœ•</button>
    <div class="modal-header" id="modal-header"></div>
    <div class="modal-body" id="modal-body"></div>
  </div>
</div>

<script>
// â”€â”€ DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

const ERAS = [
  { id:'early', zh:'æ—©ç‹æœ', en:'Early Dynastic', period:'3100â€“2686 BCE', years:414,
    color:'var(--era-early)', desc:'ä¸Šä¸‹åŸƒåŠç»Ÿä¸€ï¼Œè±¡å½¢æ–‡å­—å‘æ˜ï¼Œç‹æƒç¥æ ¼åŒ–å¼€å§‹ã€‚çº³å°”è¿ˆå®Œæˆç»Ÿä¸€ï¼Œç¬¬ä¸€ã€äºŒç‹æœå»ºç«‹ã€‚å†å²ä¸Šç¬¬ä¸€ä¸ªç»Ÿä¸€å¤§å‹å›½å®¶æ”¿æ²»å®ä½“ä¹‹ä¸€ã€‚',
    dynasties:'ç¬¬ä¸€ã€äºŒç‹æœ', capital:'æå°¼æ–¯ / å­Ÿè²æ–¯' },
  { id:'old', zh:'å¤ç‹å›½', en:'Old Kingdom', period:'2686â€“2181 BCE', years:505,
    color:'var(--era-old)', desc:'é‡‘å­—å¡”æ—¶ä»£ã€‚ç¬¬ä¸‰è‡³ç¬¬å…­ç‹æœï¼Œæ³•è€æƒåŠ›è¾¾åˆ°é¡¶å³°ï¼Œå‰è¨ä¸‰å¤§é‡‘å­—å¡”å»ºæˆã€‚é©¬ç‰¹ç¥å­¦ä½“ç³»åŒ–ï¼Œæ³•è€è¢«è§†ä¸ºå®‡å®™ç§©åºçš„ç»´æŠ¤è€…ã€‚',
    dynasties:'ç¬¬ä¸‰è‡³ç¬¬å…­ç‹æœ', capital:'å­Ÿè²æ–¯' },
  { id:'middle', zh:'ä¸­ç‹å›½', en:'Middle Kingdom', period:'2055â€“1650 BCE', years:405,
    color:'var(--era-middle)', desc:'é‡æ–°ç»Ÿä¸€åçš„å¤å…´æœŸã€‚æ–‡å­¦é»„é‡‘æ—¶ä»£ï¼ŒåŠªæ¯”äºšæ‰©å¼ ï¼Œè¡Œæ”¿ä½“ç³»æˆç†Ÿã€‚è¢«åä¸–ç§°ä¸ºå¤åŸƒåŠæ–‡å­¦ä¸æ–‡åŒ–çš„ç»å…¸æ—¶ä»£ã€‚',
    dynasties:'ç¬¬åä¸€è‡³ç¬¬åå››ç‹æœ', capital:'åº•æ¯”æ–¯ / ä¼Šæå¡”ç»´' },
  { id:'new', zh:'æ–°ç‹å›½', en:'New Kingdom', period:'1550â€“1069 BCE', years:481,
    color:'var(--era-new)', desc:'åŸƒåŠå¸å›½æœ€å¼ºç››æ—¶æœŸã€‚é©±é€å–œå…‹ç´¢æ–¯ï¼Œå¸å›½æ‰©å¼ è‡³å™åˆ©äºšä¸åŠªæ¯”äºšã€‚å›¾å¦å¡è’™ã€é˜¿è‚¯é‚£é¡¿ã€æ‹‰ç¾è¥¿æ–¯äºŒä¸–å‡åœ¨æ­¤æœŸã€‚ä¸å››å¹…èè‰çº¸ç”»ç›´æ¥ç›¸å…³ã€‚',
    dynasties:'ç¬¬åå…«è‡³ç¬¬äºŒåç‹æœ', capital:'åº•æ¯”æ–¯' },
  { id:'late', zh:'æ™šæœŸç‹æœ', en:'Late Period', period:'664â€“332 BCE', years:332,
    color:'var(--era-late)', desc:'äºšè¿°ã€æ³¢æ–¯ç›¸ç»§å…¥ä¾µä¸ç»Ÿæ²»ï¼Œæœ¬åœŸç‹æœå‡ åº¦å¤è¾Ÿã€‚åŸƒåŠç‹¬ç«‹æ€§é€æ¸ä¸§å¤±ï¼Œä½†ä¼ ç»Ÿæ–‡åŒ–ä»é¡½å¼ºå»¶ç»­ã€‚',
    dynasties:'ç¬¬äºŒåå…­è‡³ç¬¬ä¸‰åä¸€ç‹æœ', capital:'èµ›æ–¯ / å­Ÿè²æ–¯' },
  { id:'ptolemaic', zh:'æ‰˜å‹’å¯†', en:'Ptolemaic', period:'332â€“30 BCE', years:302,
    color:'var(--era-ptolemaic)', desc:'äºšå†å±±å¤§å¤§å¸å¾æœåï¼Œå¸Œè…Šæ–‡åŒ–ä¸åŸƒåŠä¼ ç»Ÿèåˆã€‚æœ«ä»£æ³•è€å…‹è±å¥¥å¸•ç‰¹æ‹‰ä¸ƒä¸–äºå‰30å¹´è‡ªå°½ï¼Œä¸‰åƒå¹´æ³•è€æ–‡æ˜ç»ˆç»“ã€‚',
    dynasties:'æ‰˜å‹’å¯†ç‹æœ', capital:'äºšå†å±±å¤§åŸ' },
];

// papyrusLinksè¿æ¥åˆ°ä¸‹æ–¹PAPYRUS_PAINTINGSçš„id
const PHARAOHS = [
  { id:'narmer', zh:'çº³å°”è¿ˆ / ç¾å°¼æ–¯', latin:'Narmer / Menes', era:'early',
    dynasty:'ç¬¬ä¸€ç‹æœ', reign:'çº¦ 3100 BCE', icon:'ğ“‡³',
    achievement:'ç»Ÿä¸€ä¸Šä¸‹åŸƒåŠï¼Œå»ºç«‹ç¬¬ä¸€ç‹æœ', papyrusLinks:[],
    keyFacts:[
      'çº³å°”è¿ˆè°ƒè‰²æ¿æ˜¯ç°å­˜æœ€æ—©çš„å†å²æ€§é“­æ–‡ä¹‹ä¸€',
      'ç™½å† ï¼ˆä¸ŠåŸƒåŠï¼‰ä¸çº¢å† ï¼ˆä¸‹åŸƒåŠï¼‰é¦–æ¬¡åˆä¸€',
      'å­Ÿè²æ–¯å»ºåŸä¼ è¯´ä¸ç¾å°¼æ–¯ç›¸å…³è”',
      'å¼€åˆ›äº†æ³•è€ä½œä¸º"ä¸¤åœ°ä¹‹ç‹"çš„ç‹æƒæ ¼å¼',
    ],
    note:'çº³å°”è¿ˆå’Œç¾å°¼æ–¯æ˜¯å¦æ˜¯åŒä¸€äººï¼Œå†å²å­¦ç•Œä»æœ‰äº‰è®®ï¼Œä½†çº³å°”è¿ˆè°ƒè‰²æ¿æ˜¯åŸƒåŠç»Ÿä¸€æœ€æ¸…æ™°çš„ç‰©è¯ã€‚ä»–å¼€åˆ›çš„ç‹æƒæ ¼å¼â€”â€”åŒå† ã€æƒæ–ã€æ³•è€çš„ç¥æ ¼â€”â€”å»¶ç»­äº†ä¸‰åƒå¹´ä¸å˜ã€‚' },

  { id:'djoser', zh:'å·¦å¡å°”', latin:'Djoser', era:'old',
    dynasty:'ç¬¬ä¸‰ç‹æœ', reign:'çº¦ 2670â€“2648 BCE', icon:'ğ“‰´',
    achievement:'å»ºé€ è¨å¡æ‹‰é˜¶æ¢¯é‡‘å­—å¡”ï¼Œäººç±»é¦–åº§å¤§å‹çŸ³æ„å»ºç­‘', papyrusLinks:[],
    keyFacts:[
      'å®°ç›¸ä¼Šå§†éœç‰¹æ™®è®¾è®¡äº†é˜¶æ¢¯é‡‘å­—å¡”ï¼Œç”¨çŸ³å¤´æ›¿ä»£æ³¥ç –',
      'è¨å¡æ‹‰ç»¼åˆå»ºç­‘ç¾¤æ˜¯å®Œæ•´çš„ä»ªå¼æ€§æ­»åç‹å›½',
      'ä¼Šå§†éœç‰¹æ™®åè¢«ç¥åŒ–ï¼Œæˆä¸ºæ™ºæ…§ä¸åŒ»å­¦ä¹‹ç¥',
      'å†å²ä¸Šç¬¬ä¸€ä½æœ‰åæœ‰å§“çš„éç‹æ—å»ºç­‘è®¾è®¡è€…',
    ],
    note:'å·¦å¡å°”çš„é˜¶æ¢¯é‡‘å­—å¡”æ˜¯å¤ä»£ä¸–ç•Œç¬¬ä¸€åº§å¤§å‹çŸ³æ„å»ºç­‘ï¼Œå¼€åˆ›äº†é‡‘å­—å¡”å»ºé€ ä¼ ç»Ÿã€‚ä»–çš„å»ºç­‘å¸ˆä¼Šå§†éœç‰¹æ™®æ˜¯å†å²ä¸Šç¬¬ä¸€ä½æœ‰åæœ‰å§“çš„éç‹æ—äººç‰©â€”â€”å¤©æ‰å¾€å¾€éœ€è¦ä¸€ä½å›ä¸»ç»™ä»–å®éªŒçš„æœºä¼šã€‚' },

  { id:'khufu', zh:'èƒ¡å¤«', latin:'Khufu / Cheops', era:'old',
    dynasty:'ç¬¬å››ç‹æœ', reign:'çº¦ 2589â€“2566 BCE', icon:'â–³',
    achievement:'å»ºé€ å‰è¨å¤§é‡‘å­—å¡”ï¼Œå¤ä»£ä¸–ç•Œæœ€é«˜å»ºç­‘', papyrusLinks:[],
    keyFacts:[
      'å¤§é‡‘å­—å¡”é«˜146.5ç±³ï¼Œä¿æŒä¸–ç•Œæœ€é«˜å»ºç­‘çºªå½•è¿‘3800å¹´',
      'åŠ¨å‘˜çº¦2.3ä¸‡å·¥äººï¼Œå»ºé€ æ—¶é—´çº¦20å¹´',
      'æœ¬äººå­˜ä¸–è‚–åƒåªæœ‰ä¸€ä»¶æå°çš„è±¡ç‰™é›•åƒï¼ˆçº¦7å˜ç±³ï¼‰',
      'å‰è¨é«˜åŸçš„å¤©æ–‡æœå‘è¢«è®¤ä¸ºå¯¹åº”çŒæˆ·åº§è…°å¸¦',
    ],
    note:'ä½ ä»Šå¤©æ—©ä¸Šç«™åœ¨é¢å‰çš„é‚£åº§é‡‘å­—å¡”ï¼Œå°±æ˜¯èƒ¡å¤«çš„ã€‚ä»–çš„é™µå¢“å†…éƒ¨çš„ç²¾å¯†ç¨‹åº¦æ¯”ä»»ä½•æƒ³è±¡çš„éƒ½è¦æƒŠäººâ€”â€”å›½ç‹å¢“å®¤ã€çš‡åå¢“å®¤ã€å¤§èµ°å»Šï¼Œä»¥åŠè‡³ä»Šæœªå®Œå…¨è§£å¼€çš„é€šé£äº•è°œå›¢ã€‚è®½åˆºçš„æ˜¯ï¼Œå»ºé€ äº†ä¸–ç•Œæœ€å¤§å»ºç­‘çš„æ³•è€ï¼Œç•™ä¸‹çš„å”¯ä¸€è‚–åƒå°åˆ°å¯ä»¥æ”¾åœ¨æ‰‹æŒé‡Œã€‚' },

  { id:'hatshepsut', zh:'å“ˆç‰¹è°¢æ™®è‹ç‰¹', latin:'Hatshepsut', era:'new',
    dynasty:'ç¬¬åå…«ç‹æœ', reign:'çº¦ 1479â€“1458 BCE', icon:'ğ“†„',
    achievement:'å¤åŸƒåŠæœ€æˆåŠŸçš„å¥³æ€§æ³•è€ï¼Œæ‰©å¤§è´¸æ˜“è·¯çº¿è‡³è“¬ç‰¹', papyrusLinks:[],
    keyFacts:[
      'ä»¥æ‘„æ”¿ç‹èº«ä»½å¼€å§‹æ‰§æ”¿ï¼Œåè‡ªç§°æ³•è€å¹¶æˆ´åŒå† ',
      'å£ç”»å’Œé›•åƒä¸­ä»¥ç”·æ€§å½¢è±¡å‘ˆç°ï¼Œä½†é“­æ–‡å¸¸ç”¨å¥³æ€§è¯­æ³•',
      'å¾·å°”å·´å“ˆé‡Œç¥åº™æ˜¯å…¶å»ºç­‘æ°ä½œ',
      'ç»§ä»»è€…å›¾ç‰¹æ‘©æ–¯ä¸‰ä¸–ç³»ç»Ÿæ€§åœ°æŠ¹å»å¥¹çš„åå­—å’Œå½¢è±¡',
    ],
    note:'å“ˆç‰¹è°¢æ™®è‹ç‰¹ç»Ÿæ²»åŸƒåŠè‡³å°‘21å¹´ï¼Œä½†ç»§ä»»è€…å‡ ä¹å°†å¥¹ä»æ‰€æœ‰çºªå¿µç¢‘ä¸ŠæŠ¹å»ã€‚å¥¹çš„å­˜åœ¨æ˜¯åœ¨è¿‘ä»£æ‰è¢«åŸƒåŠå­¦å®¶ä»ç¢ç‰‡ä¸­é‡å»ºçš„â€”â€”"å†å²çš„æ’°å†™è€…"å†³å®šè°å­˜åœ¨ã€è°æ¶ˆå¤±ã€‚è¿™å’Œé˜¿è‚¯é‚£é¡¿è¢«æŠ¹åæ˜¯åŒä¸€å¥—æƒåŠ›é€»è¾‘ã€‚' },

  { id:'thutmose3', zh:'å›¾ç‰¹æ‘©æ–¯ä¸‰ä¸–', latin:'Thutmose III', era:'new',
    dynasty:'ç¬¬åå…«ç‹æœ', reign:'çº¦ 1479â€“1425 BCE', icon:'âš”ï¸',
    achievement:'17æ¬¡å†›äº‹è¿œå¾ï¼ŒåŸƒåŠå¸å›½ç‰ˆå›¾æœ€å¤§æ—¶æœŸ', papyrusLinks:[],
    keyFacts:[
      'è¢«ç§°ä¸º"åŸƒåŠçš„æ‹¿ç ´ä»‘"ï¼Œ17æ¬¡å™åˆ©äºš-å·´å‹’æ–¯å¦æˆ˜å½¹',
      'å¸å›½åŒ—è‡³å¹¼å‘æ‹‰åº•æ²³ï¼Œå—è‡³å°¼ç½—æ²³ç¬¬å››ç€‘å¸ƒ',
      'å¡å°”çº³å…‹ç¥åº™ç™¾æŸ±å…æ˜¯å…¶å»ºç­‘è´¡çŒ®',
      'å¹´è®°ï¼ˆAnnalsï¼‰æ˜¯æœ€æ—©çš„æˆ˜äº‰å¹´é‰´ä¹‹ä¸€',
    ],
    note:'ä»–å…ˆè¢«å“ˆç‰¹è°¢æ™®è‹ç‰¹å‹åˆ¶çº¦20å¹´ï¼Œåæˆä¸ºåŸƒåŠå²ä¸Šæœ€ä¼Ÿå¤§çš„å†›äº‹å¾æœè€…ã€‚ä»–åœ¨å»ä¸–å‰ç³»ç»ŸæŠ¹å»äº†å“ˆç‰¹è°¢æ™®è‹ç‰¹çš„è®°å¿†â€”â€”æƒåŠ›çš„äº‰å¤ºå»¶ä¼¸åˆ°äº†å†å²ä¹¦å†™å±‚é¢ã€‚è°æ§åˆ¶äº†å™äº‹ï¼Œè°å°±æ§åˆ¶äº†å†å²ã€‚' },

  { id:'akhenaten', zh:'é˜¿è‚¯é‚£é¡¿ + å¥ˆè´¹å°”ææ', latin:'Akhenaten + Nefertiti', era:'new',
    dynasty:'ç¬¬åå…«ç‹æœ', reign:'çº¦ 1353â€“1336 BCE', icon:'â˜€ï¸',
    achievement:'å²ä¸Šæœ€æ—©çš„ä¸€ç¥æ•™æ”¹é©å®éªŒï¼Œä»¥é˜¿é¡¿ï¼ˆå¤ªé˜³ç›˜ï¼‰å–ä»£ä¼—ç¥', papyrusLinks:['aten'],
    keyFacts:[
      'å°†é¦–éƒ½è¿è‡³é˜¿ç›çº³ï¼ˆé˜¿è‚¯é˜¿é¡¿ï¼‰ï¼Œå®Œå…¨æ–°å»ºçš„åŸå¸‚',
      'å°é—­é˜¿è’™ç¥åº™ï¼Œæ²¡æ”¶ç¥åº™è´¢äº§ï¼Œæ‰“å‡»ç¥­å¸é›†å›¢',
      'å¥ˆè´¹å°”ææèƒ¸åƒæ˜¯å¤åŸƒåŠæœ€è‘—åçš„é›•åƒä¹‹ä¸€ï¼Œç°è—æŸæ—',
      'æ­»åè¢«ç»§ä»»è€…ä»å†å²ä¸­æŠ¹å»ï¼Œç§°"ç½ªäºº"æˆ–"é‚£ä¸ªå¼‚æ•™å¾’"',
    ],
    note:'é˜¿è‚¯é‚£é¡¿æ˜¯ä¸–ç•Œå†å²ä¸Šæœ€æ—©çš„ä¸€ç¥æ•™æ”¹é©è€…ä¹‹ä¸€ï¼Œæ¯”æ‘©è¥¿æ—¶ä»£çš„è¯´æ³•è¿˜è¦æ—©ã€‚ä»–çš„æ”¹é©å½»åº•å¤±è´¥â€”â€”ä½†ç•™ä¸‹äº†ä¸€ä¸ªè§†è§‰é—äº§ï¼šä½ ä¹°çš„é‚£å¹…"æ‹œæ—¥å›¾"ï¼Œå¤ªé˜³å…‰æœ«ç«¯ä¼¸å‡ºæ‰‹æŒèµäºˆå®‰å¡ï¼ˆç”Ÿå‘½ï¼‰ã€‚è¿™æ˜¯ä¸€åœºå¤±è´¥çš„å®—æ•™é©å‘½ç•™ä¸‹çš„å›¾åƒã€‚' },

  { id:'tutankhamun', zh:'å›¾å¦å¡è’™', latin:'Tutankhamun', era:'new',
    dynasty:'ç¬¬åå…«ç‹æœ', reign:'çº¦ 1332â€“1323 BCE', icon:'ğ“…ƒ',
    achievement:'æ¢å¤å¤šç¥æ•™ç§©åºï¼Œå…¶å®Œæ•´é™µå¢“äº1922å¹´è¢«å‘ç°ï¼Œéœ‡æƒŠä¸–ç•Œ', papyrusLinks:['tutankhamun','horus_eye','ankh'],
    keyFacts:[
      'çº¦9å²ç™»åŸºï¼Œ19å²å»ä¸–ï¼Œæ­»å› è‡³ä»Šæœ‰äº‰è®®',
      'åŸåå›¾å¦å¡é¡¿ï¼ˆå´‡æ‹œé˜¿é¡¿ï¼‰ï¼Œæ”¹åå›¾å¦å¡è’™ï¼ˆå´‡æ‹œé˜¿è’™ï¼‰ï¼Œæ„åœ¨æ¢å¤æ—§å®—æ•™',
      '1922å¹´éœåå¾·Â·å¡ç‰¹å‘ç°å®Œæ•´é™µå¢“ï¼Œ3000ä½™ä»¶é™ªè‘¬å“å®Œå¥½æ— æŸ',
      'é»„é‡‘é¢å…·é‡çº¦11å…¬æ–¤ï¼Œçº¯é‡‘æ‰“é€ ï¼Œæ˜¯ç°ä»£ä¸–ç•Œæœ€è‘—åçš„åŸƒåŠæ–‡ç‰©',
    ],
    note:'å›¾å¦å¡è’™ç®—ä¸ä¸Šé‡è¦çš„æ³•è€ï¼Œåªæ´»äº†19å¹´ï¼Œåœ¨ä½çº¦10å¹´ï¼Œæ²¡æœ‰èµ«èµ«æˆ˜åŠŸã€‚ä»–ä¹‹æ‰€ä»¥æˆä¸ºç°ä»£ä¸–ç•Œæœ€è‘—åçš„åŸƒåŠæ³•è€ï¼Œå®Œå…¨æ˜¯å› ä¸ºä»–çš„é™µå¢“æ˜¯å”¯ä¸€æ²¡è¢«æ´—åŠ«ä¸€ç©ºçš„ç‹å®¤é™µå¢“ã€‚è¿™æ˜¯"å¹¸å­˜åå·®"åœ¨å†å²å­¦ä¸Šæœ€å…¸å‹çš„æ¡ˆä¾‹ä¹‹ä¸€ã€‚' },

  { id:'ramesses2', zh:'æ‹‰ç¾è¥¿æ–¯äºŒä¸–', latin:'Ramesses II', era:'new',
    dynasty:'ç¬¬åä¹ç‹æœ', reign:'çº¦ 1279â€“1213 BCE', icon:'ğŸ›ï¸',
    achievement:'åœ¨ä½66å¹´ï¼Œå¤åŸƒåŠå²ä¸Šåœ¨ä½æœ€é•¿æ³•è€ï¼Œé˜¿å¸ƒè¾›æ‹œå‹’ç¥åº™å»ºé€ è€…', papyrusLinks:['ankh'],
    keyFacts:[
      'åœ¨ä½é•¿è¾¾66å¹´ï¼Œå¨¶å¦»çº¦200äººï¼Œå­å¥³è¶…è¿‡100äºº',
      'å¡è¿­ä»€æˆ˜å½¹åç­¾è®¢ä¸–ç•Œæœ€æ—©çš„å›½é™…å’Œå¹³æ¡çº¦ä¹‹ä¸€',
      'é˜¿å¸ƒè¾›æ‹œå‹’ç¥åº™ä»¥å¤©æ–‡ç²¾åº¦å¯¹å‡†ç”Ÿæ—¥å’ŒåŠ å†•æ—¥çš„æ—¥å‡º',
      'åŸƒåŠå­¦å®¶è®¤ä¸ºä»–å¯èƒ½æ˜¯ã€Šå‡ºåŸƒåŠè®°ã€‹ä¸­çš„æ³•è€',
    ],
    note:'æ‹‰ç¾è¥¿æ–¯äºŒä¸–æŠŠè‡ªå·±çš„åå­—åˆ»åœ¨äº†åŸƒåŠæ¯ä¸€åº§é‡è¦å»ºç­‘ä¸Šâ€”â€”æœ‰æ—¶æ˜¯çœŸæ­£å»ºé€ çš„ï¼Œæœ‰æ—¶æ˜¯åœ¨å‰äººçš„çºªå¿µç¢‘ä¸ŠæŠ¹å»æ—§åæ¢ä¸Šè‡ªå·±çš„ã€‚ä»–æ´»äº†å¤§çº¦90å²ï¼Œäº²çœ¼çœ‹ç€å¸å›½åœ¨æ™šå¹´å¼€å§‹è¡°é€€ã€‚ä¸€ä¸ªæåº¦æ¸´æœ›è¢«è®°ä½çš„äººï¼Œç¡®å®è¢«è®°ä½äº†ã€‚' },

  { id:'cleopatra7', zh:'å…‹è±å¥¥å¸•ç‰¹æ‹‰ä¸ƒä¸–', latin:'Cleopatra VII Philopator', era:'ptolemaic',
    dynasty:'æ‰˜å‹’å¯†ç‹æœæœ«æœŸ', reign:'çº¦ 51â€“30 BCE', icon:'ğŸŒº',
    achievement:'æœ€åä¸€ä½ç‹¬ç«‹ç»Ÿæ²»åŸƒåŠçš„æ³•è€ï¼Œä¸‰åƒå¹´æ³•è€æ–‡æ˜çš„ç»ˆç‚¹', papyrusLinks:['ankh'],
    keyFacts:[
      'æ‰˜å‹’å¯†ç‹æœä¸­å”¯ä¸€å­¦ä¹ åŸƒåŠè¯­çš„æˆå‘˜ï¼Œé€šæ™“9ç§è¯­è¨€',
      'å…ˆåä¸å‡¯æ’’ã€é©¬å…‹Â·å®‰ä¸œå°¼ç»“ç›Ÿï¼Œè¯•å›¾ç»´ç³»åŸƒåŠç‹¬ç«‹',
      'å‰30å¹´å¥¥å¤æ–¯éƒ½æ”»å…¥åŸƒåŠï¼Œå…‹è±å¥¥å¸•ç‰¹æ‹‰è‡ªå°½',
      'å¥¹çš„æ­»æ ‡å¿—ç€æ³•è€æ—¶ä»£ç»ˆç»“ï¼ŒåŸƒåŠæˆä¸ºç½—é©¬è¡Œçœ',
    ],
    note:'å…‹è±å¥¥å¸•ç‰¹æ‹‰ä¸æ˜¯åŸƒåŠäººï¼Œè€Œæ˜¯é©¬å…¶é¡¿å¸Œè…Šäººâ€”â€”ä½†å¥¹æ˜¯æ‰˜å‹’å¯†ç‹æœå”¯ä¸€æ„¿æ„å­¦ä¹ åŸƒåŠè¯­ã€èå…¥æœ¬åœ°æ–‡åŒ–çš„æ³•è€ã€‚å¥¹çš„æ­»æ˜¯ä¸‰åƒå¹´æ³•è€æ–‡æ˜çš„å¥ç‚¹ã€‚ä½ ä»Šå¤©ä¹°çš„å®‰å¡ç¬¦å·ï¼Œåœ¨å¥¹æ­»åä¸ä¹…å°±å¼€å§‹è¢«ç§‘æ™®ç‰¹åŸºç£å¾’æ”¹é€ äº†ã€‚' },
];

const PAPYRUS_PAINTINGS = [
  { id:'tutankhamun', zh:'å›¾å¦å¡è’™é»„é‡‘é¢å…·', en:'Tutankhamun Golden Mask', icon:'ğ“…ƒ',
    dynasty:'ç¬¬åå…«ç‹æœ', era:'new', eraColor:'var(--era-new)',
    year:'çº¦ 1332 BCE', symbol:'ç‹æƒ Â· èº«åå Â· å¹¸å­˜åå·®',
    timelinePos: 57,  // % from left, approx (3100-1332)/3070 * 100
    isUniversal: false,
    note:'å›¾å¦å¡è’™åœ¨ä¸–æ—¶å¹¶éå¼ºåŠ¿æ³•è€ã€‚ä»–çš„é»„é‡‘é¢å…·æˆä¸ºæœ€è‘—åçš„åŸƒåŠç¬¦å·ï¼Œçº¯å±å¹¸å­˜åå·®â€”â€”ä»–çš„é™µå¢“æ˜¯å”¯ä¸€æ²¡è¢«ç›—ç©ºçš„æ³•è€é™µã€‚æˆ‘ä»¬ä»¥ä¸ºä»–ä»£è¡¨äº†æ³•è€æ—¶ä»£ï¼Œä½†ä»–ä»£è¡¨çš„åªæ˜¯"é‚£ä¸ªå”¯ä¸€ä¿å­˜å®Œå¥½çš„"ã€‚',
    pharaohs:['tutankhamun','akhenaten'] },

  { id:'aten', zh:'é˜¿é¡¿å´‡æ‹œ Â· æ‹œæ—¥å›¾', en:'Aten Worship Scene', icon:'â˜€ï¸',
    dynasty:'ç¬¬åå…«ç‹æœ', era:'new', eraColor:'var(--era-new)',
    year:'çº¦ 1353â€“1336 BCE', symbol:'å¤ªé˜³å´‡æ‹œ Â· ä¸€ç¥æ•™å®éªŒ',
    timelinePos: 56,
    isUniversal: false,
    note:'ç”»é¢æ˜¯æ³•è€å®¶æ—å‘å¤ªé˜³å…‰èŠ’ä¸‹è·ªï¼Œå¤ªé˜³å…‰æœ«ç«¯ä¼¸å‡ºæ‰‹æŒèµäºˆå®‰å¡ï¼ˆç”Ÿå‘½ç¬¦å·ï¼‰ã€‚è¿™æ˜¯é˜¿è‚¯é‚£é¡¿å®—æ•™æ”¹é©çš„è§†è§‰è¯­è¨€â€”â€”ä»–è¯•å›¾æŠŠåŸƒåŠæ”¹æˆä¸€ç¥æ•™ï¼Œæœ€ç»ˆå¤±è´¥ï¼Œç»§ä»»è€…æŠŠä»–çš„åå­—ä»å†å²è®°å½•é‡ŒæŠ¹æ‰äº†ã€‚è¿™å¹…ç”»æ˜¯ä¸€åœºå¤±è´¥çš„å®—æ•™é©å‘½ç•™ä¸‹çš„æ®‹å½±ã€‚',
    pharaohs:['akhenaten','tutankhamun'] },

  { id:'horus_eye', zh:'è·é²æ–¯ / ç“¦å‰ç‰¹ä¹‹çœ¼', en:'Horus / Wadjet Eye', icon:'ğ“‚€',
    dynasty:'è·¨è¶Šæ‰€æœ‰æœä»£', era:'all', eraColor:'var(--gold)',
    year:'è·¨è¶Šæ‰€æœ‰æ—¶ä»£', symbol:'ä¿æŠ¤ Â· æ²»æ„ˆ Â· å®Œæ•´',
    timelinePos: 50,
    isUniversal: true,
    note:'è·é²æ–¯ä¹‹çœ¼æ˜¯è·¨è¶Šæ‰€æœ‰ç‹æœçš„æŠ¤èº«ç¬¦ç¬¦å·ï¼Œèµ·æºäºè·é²æ–¯ä¸èµ›ç‰¹çš„ç¥è¯ã€‚è¿™åªçœ¼ç›è¢«èµ›ç‰¹æŒ–å‡ºï¼Œç”±æ‰˜ç‰¹å¤åŸï¼Œå› æ­¤è±¡å¾"æ²»æ„ˆä¸å®Œæ•´"ã€‚è‡³ä»Šä»æ˜¯å…¨çƒæœ€æµè¡Œçš„çº¹èº«å›¾æ¡ˆä¹‹ä¸€ã€‚ç¬¦å·çš„ç”Ÿå‘½åŠ›å¾€å¾€æ¯”å®ƒè¯ç”Ÿçš„æ–‡æ˜æ›´é•¿ã€‚',
    pharaohs:['tutankhamun'] },

  { id:'ankh', zh:'å®‰å¡ Â· ç”Ÿå‘½ä¹‹é’¥', en:'Ankh Cross', icon:'â˜¥',
    dynasty:'è·¨è¶Šæ‰€æœ‰æœä»£', era:'all', eraColor:'var(--gold)',
    year:'è·¨è¶Šæ‰€æœ‰æ—¶ä»£', symbol:'ç”Ÿå‘½ Â· æ°¸ç”Ÿ Â· ç¬¦å·ä¼ æ‰¿',
    timelinePos: 50,
    isUniversal: true,
    note:'å®‰å¡æ˜¯å¤åŸƒåŠè±¡å½¢æ–‡å­—"ç”Ÿå‘½"ï¼Œåè¢«ç§‘æ™®ç‰¹åŸºç£å¾’æ”¹é€ æˆç§‘æ™®ç‰¹åå­—æ¶ï¼ˆCrux Ansataï¼‰ã€‚ä»Šå¤©åœ¨ä¼Šæ–¯å…°å¸‚åœºé‡Œè¢«å–ç»™ä¸­å›½æ¸¸å®¢â€”â€”ä¸€ä¸ªç¬¦å·æ¨ªè·¨å¤šç¥æ•™ã€åŸºç£æ•™ã€ä¼Šæ–¯å…°å•†ä¸šçš„ä¸‰æ¬¡è½¬ä¸–ã€‚è¿™æ¡ç¬¦å·çš„æ—…è¡Œè·¯çº¿ï¼Œæ¯”æˆ‘ä»Šå¤©çš„è¡Œç¨‹è¿œå¾—å¤šã€‚',
    pharaohs:['tutankhamun','ramesses2','cleopatra7'] },
];

const HISTORY_EVENTS = [
  { num:'EVENT I', title:'ä¸Šä¸‹åŸƒåŠç»Ÿä¸€', era:'early', year:'çº¦ 3100 BCE', pharaohs:['narmer'],
    body:'çº³å°”è¿ˆå®Œæˆä¸Šä¸‹åŸƒåŠç»Ÿä¸€ï¼Œå»ºç«‹ç¬¬ä¸€ç‹æœã€‚çº³å°”è¿ˆè°ƒè‰²æ¿åŒæ—¶å±•ç¤ºäº†ç™½å† å’Œçº¢å† ï¼Œè±¡å¾ä¸¤åœ°åˆä¸€ã€‚è¿™æ˜¯äººç±»å†å²ä¸Šç¬¬ä¸€ä¸ªç»Ÿä¸€çš„å¤§å‹å›½å®¶æ”¿æ²»å®ä½“ä¹‹ä¸€ï¼Œå¥ å®šäº†ä¸‰åƒå¹´æ³•è€æ–‡æ˜çš„åŸºç¡€æ¶æ„ã€‚' },
  { num:'EVENT II', title:'é‡‘å­—å¡”æ—¶ä»£çš„é«˜å³°', era:'old', year:'çº¦ 2560 BCE', pharaohs:['djoser','khufu'],
    body:'ä»å·¦å¡å°”çš„é˜¶æ¢¯é‡‘å­—å¡”åˆ°èƒ¡å¤«çš„å¤§é‡‘å­—å¡”ï¼Œå¤ç‹å›½ç¬¬ä¸‰è‡³ç¬¬å››ç‹æœå®Œæˆäº†äººç±»å»ºç­‘å²ä¸Šæœ€å®ä¼Ÿçš„å·¥ç¨‹ã€‚é‡‘å­—å¡”çš„å‡ ä½•ç²¾åº¦å’Œå¤©æ–‡å¯¹é½å¹¶éå¶ç„¶â€”â€”å®ƒæ˜¯é©¬ç‰¹ç¥å­¦ï¼ˆå®‡å®™ç§©åºï¼‰çš„ç©ºé—´è¡¨è¾¾ã€‚å‰è¨ä¸‰å¤§é‡‘å­—å¡”ä»Šå¤©ä»æ˜¯å¤ä»£ä¸–ç•Œä¸ƒå¤§å¥‡è¿¹ä¸­å”¯ä¸€ç•™å­˜çš„ã€‚' },
  { num:'EVENT III', title:'é˜¿è‚¯é‚£é¡¿çš„å®—æ•™é©å‘½', era:'new', year:'çº¦ 1353 BCE', pharaohs:['akhenaten'],
    body:'é˜¿è‚¯é‚£é¡¿å°é—­é˜¿è’™ç¥åº™ï¼Œè¿éƒ½é˜¿ç›çº³ï¼Œä»¥é˜¿é¡¿ï¼ˆå¤ªé˜³ç›˜ï¼‰ä¸ºå”¯ä¸€ç¥ã€‚è¿™æ˜¯æœ‰å²ä»¥æ¥æœ€æ—©çš„ç³»ç»Ÿæ€§ä¸€ç¥æ•™æ”¹é©ä¹‹ä¸€ã€‚æ”¹é©æŒç»­çº¦17å¹´ï¼Œé˜¿è‚¯é‚£é¡¿æ­»åè¢«å½»åº•é€†è½¬â€”â€”å…¶åå­—ä»æ‰€æœ‰çºªå¿µç¢‘ä¸Šè¢«æŠ¹å»ï¼Œé˜¿é©¬çº³åŸè¢«åºŸå¼ƒã€‚ä½ ä¹°çš„é‚£å¹…æ‹œæ—¥å›¾ï¼Œæ˜¯è¿™åœºé©å‘½ç•™ä¸‹çš„è§†è§‰é—ç‰©ã€‚' },
  { num:'EVENT IV', title:'å›¾å¦å¡è’™é™µå¢“çš„å‘ç°', era:'new', year:'1922å¹´ï¼ˆå‘ç°ï¼‰', pharaohs:['tutankhamun'],
    body:'1922å¹´11æœˆ4æ—¥ï¼Œè‹±å›½åŸƒåŠå­¦å®¶éœåå¾·Â·å¡ç‰¹åœ¨å¸ç‹è°·å‘ç°å›¾å¦å¡è’™çš„å®Œæ•´é™µå¢“ã€‚3000å¤šä»¶é™ªè‘¬å“å®Œå¥½ä¿å­˜ï¼Œé»„é‡‘é¢å…·æˆä¸º20ä¸–çºªæœ€è‘—åçš„è€ƒå¤å‘ç°ã€‚è¿™ä¸ªå‘ç°é‡æ–°ç‚¹ç‡ƒäº†å…¨çƒå¯¹å¤åŸƒåŠçš„å…´è¶£ï¼Œä¹Ÿè®©ä¸€ä½ç”Ÿå‰å¹³åº¸çš„æ³•è€ï¼Œå˜æˆäº†ç°ä»£ä¸–ç•Œæœ€è¾¨è¯†åº¦æœ€é«˜çš„å¤ä»£ç¬¦å·ã€‚' },
  { num:'EVENT V', title:'å¡è¿­ä»€æˆ˜å½¹ä¸é¦–ä»½å’Œå¹³æ¡çº¦', era:'new', year:'çº¦ 1274 BCE', pharaohs:['ramesses2'],
    body:'æ‹‰ç¾è¥¿æ–¯äºŒä¸–ä¸èµ«æ¢¯å¸å›½åœ¨å¡è¿­ä»€ï¼ˆç°å™åˆ©äºšï¼‰çˆ†å‘å¤§æˆ˜ï¼ŒåŒæ–¹å‡å®£ç§°èƒœåˆ©ã€‚çº¦15å¹´åï¼ŒåŒæ–¹ç­¾è®¢ã€Šå¡è¿­ä»€æ¡çº¦ã€‹â€”â€”è¿™æ˜¯ç°å­˜æœ€æ—©çš„å›½é™…å’Œå¹³æ¡çº¦ï¼Œå‰¯æœ¬ä¿å­˜äºè”åˆå›½çº½çº¦æ€»éƒ¨ã€‚æˆ˜äº‰çš„ç»ˆç‚¹æœ‰æ—¶ä¸æ˜¯èƒœåˆ©ï¼Œè€Œæ˜¯ä¸€çº¸å¯¹è¯ã€‚' },
  { num:'EVENT VI', title:'æ³•è€æ—¶ä»£çš„ç»ˆç»“', era:'ptolemaic', year:'å‰ 30 BCE', pharaohs:['cleopatra7'],
    body:'å…‹è±å¥¥å¸•ç‰¹æ‹‰ä¸ƒä¸–è‡ªå°½ï¼ŒåŸƒåŠå¹¶å…¥ç½—é©¬å¸å›½ï¼Œä¸‰åƒå¹´çš„æ³•è€æ–‡æ˜å°±æ­¤ç»ˆç»“ã€‚ä½†ç¬¦å·ä½“ç³»å¹¶æœªæ¶ˆå¤±â€”â€”å®‰å¡è¢«æ”¹é€ æˆç§‘æ™®ç‰¹åå­—æ¶ï¼Œè·é²æ–¯ä¹‹çœ¼æˆä¸ºæŠ¤èº«ç¬¦ï¼Œè±¡å½¢æ–‡å­—æ¶ˆå¤±äº†ï¼Œä½†é‚£äº›å›¾åƒçš„åä»£è¿˜åœ¨å“ˆåˆ©åˆ©å¸‚åœºé‡Œè¢«å‡ºå”®ã€‚æ–‡æ˜å¯ä»¥æ¶ˆå¤±ï¼Œç¬¦å·å¾ˆéš¾æ­»äº¡ã€‚' },
];

// â”€â”€ HELPERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function getEra(id) { return ERAS.find(e => e.id === id); }
function getPharaoh(id) { return PHARAOHS.find(p => p.id === id); }
function getPainting(id) { return PAPYRUS_PAINTINGS.find(p => p.id === id); }

const ERA_COLORS = {};
ERAS.forEach(e => ERA_COLORS[e.id] = e.color);

// â”€â”€ STARS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function createStars() {
  const container = document.getElementById('stars');
  for (let i = 0; i < 120; i++) {
    const s = document.createElement('div');
    s.className = 'star';
    const size = Math.random() * 2 + .5;
    s.style.cssText = `
      left:${Math.random()*100}%; top:${Math.random()*100}%;
      width:${size}px; height:${size}px;
      --d:${3+Math.random()*5}s; --delay:${Math.random()*6}s; --o:${.1+Math.random()*.4};
    `;
    container.appendChild(s);
  }
}

// â”€â”€ TAB SWITCHING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function switchTab(name, btn) {
  document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
  document.querySelectorAll('.nav-tab').forEach(el => el.classList.remove('active'));
  document.getElementById('tab-' + name).classList.add('active');
  if (btn) btn.classList.add('active');
  if (name === 'timeline' && !document.getElementById('dynasty-rail').children.length) renderTimeline();
}

// â”€â”€ ERA FILTERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function renderEraFilters() {
  const row = document.getElementById('era-filters');
  const allBtn = document.createElement('button');
  allBtn.className = 'filter-pill active';
  allBtn.dataset.era = 'all';
  allBtn.textContent = 'å…¨éƒ¨';
  allBtn.onclick = () => filterPharaohs('all', allBtn);
  row.appendChild(allBtn);
  ERAS.forEach(era => {
    const btn = document.createElement('button');
    btn.className = 'filter-pill';
    btn.dataset.era = era.id;
    btn.textContent = era.zh + ' ' + era.period;
    btn.onclick = () => filterPharaohs(era.id, btn);
    row.appendChild(btn);
  });
}

function filterPharaohs(eraId, btn) {
  document.querySelectorAll('.filter-pill').forEach(p => p.classList.remove('active'));
  btn.classList.add('active');
  document.querySelectorAll('.pharaoh-card').forEach(card => {
    card.classList.toggle('hidden', eraId !== 'all' && card.dataset.era !== eraId);
  });
}

// â”€â”€ PHARAOH GRID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function renderPharaohs() {
  const grid = document.getElementById('pharaoh-grid');
  PHARAOHS.forEach(p => {
    const era = getEra(p.era) || { color:'var(--gold)', zh:'' };
    const hasPapyrus = p.papyrusLinks.length > 0;
    const card = document.createElement('div');
    card.className = 'pharaoh-card' + (hasPapyrus ? ' has-papyrus' : '');
    card.dataset.era = p.era;
    card.onclick = () => openPharaohModal(p);
    card.innerHTML = `
      <div class="pharaoh-avatar" style="background: linear-gradient(160deg, ${era.color}18, rgba(10,8,6,.6));">
        <span class="pharaoh-glyph">${p.icon}</span>
        <span class="pharaoh-era-badge" style="color:${era.color}; border-color:${era.color}50;">${era.zh}${hasPapyrus ? ' âœ¦' : ''}</span>
      </div>
      <div class="pharaoh-info">
        <div class="pharaoh-name-zh">${p.zh}</div>
        <div class="pharaoh-name-latin">${p.latin}</div>
        <div class="pharaoh-meta">${p.dynasty} Â· ${p.reign}</div>
        <div class="pharaoh-achievement">${p.achievement}</div>
        ${hasPapyrus ? `<div class="papyrus-badges">${p.papyrusLinks.map(id => {
          const pt = getPainting(id);
          return `<span class="papyrus-badge">${pt ? pt.icon + ' ' + pt.zh.split('Â·')[0].trim() : id}</span>`;
        }).join('')}</div>` : ''}
      </div>`;
    grid.appendChild(card);
  });
}

// â”€â”€ MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function openPharaohModal(p) {
  const era = getEra(p.era) || { color:'var(--gold)', zh:'æœªçŸ¥æ—¶ä»£', zh:'', period:'' };
  const eraColor = era.color;
  document.getElementById('modal-header').innerHTML = `
    <span class="modal-glyph">${p.icon}</span>
    <div class="modal-name-zh">${p.zh}</div>
    <div class="modal-name-latin">${p.latin}</div>
    <div class="modal-meta-row">
      <span class="modal-badge" style="color:${eraColor}; border-color:${eraColor}50;">${era.zh} ${era.period}</span>
      <span class="modal-badge" style="color:rgba(212,196,160,.5); border-color:rgba(212,196,160,.15);">${p.dynasty}</span>
      <span class="modal-badge" style="color:rgba(212,196,160,.5); border-color:rgba(212,196,160,.15);">${p.reign}</span>
    </div>`;

  const paintingSection = p.papyrusLinks.length > 0 ? `
    <div class="modal-section">
      <div class="modal-section-label">ğ“‹´ èè‰çº¸è¿æ¥ Â· ä¸ä½ è´­ä¹°çš„å››å¹…ç”»ç›¸å…³</div>
      ${p.papyrusLinks.map(id => {
        const pt = getPainting(id);
        if (!pt) return '';
        return `<div class="papyrus-link-item">
          <span class="papyrus-link-icon">${pt.icon}</span>
          <div>
            <div class="papyrus-link-name">${pt.zh}</div>
            <div class="papyrus-link-symbol">${pt.symbol}</div>
          </div>
        </div>`;
      }).join('')}
    </div>` : '';

  document.getElementById('modal-body').innerHTML = `
    <div class="modal-section">
      <div class="modal-section-label">ğ“‡³ å†å²èƒŒæ™¯</div>
      <p class="modal-note">${p.note}</p>
    </div>
    <div class="modal-section">
      <div class="modal-section-label">ğ“ å…³é”®å²å®</div>
      <ul class="modal-facts">${p.keyFacts.map(f => `<li>${f}</li>`).join('')}</ul>
    </div>
    <div class="modal-section">
      <div class="modal-section-label">ğ“ƒ€ æœä»£ä¿¡æ¯</div>
      <div class="attr-grid">
        <div class="attr-item"><div class="attr-label">ç‹æœ</div><div class="attr-value">${p.dynasty}</div></div>
        <div class="attr-item"><div class="attr-label">åœ¨ä½æ—¶é—´</div><div class="attr-value">${p.reign}</div></div>
        <div class="attr-item"><div class="attr-label">å†å²æ—¶ä»£</div><div class="attr-value">${era.zh} Â· ${era.en}</div></div>
        <div class="attr-item"><div class="attr-label">å½“æ—¶é¦–éƒ½</div><div class="attr-value">${era.capital || 'â€”'}</div></div>
      </div>
    </div>
    ${paintingSection}`;

  document.getElementById('modal-overlay').classList.add('open');
  document.body.style.overflow = 'hidden';
}

function openPharaohById(id) {
  const p = getPharaoh(id);
  if (p) openPharaohModal(p);
}

function closeModal() {
  document.getElementById('modal-overlay').classList.remove('open');
  document.body.style.overflow = '';
}

function handleOverlayClick(e) {
  if (e.target === document.getElementById('modal-overlay')) closeModal();
}

document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

// â”€â”€ DYNASTY TIMELINE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

const TIMELINE_START = 3100; // BCE
const TIMELINE_END = 30;     // BCE
const TIMELINE_SPAN = TIMELINE_START - TIMELINE_END; // 3070 years

function yearToPercent(yearBCE) {
  return ((TIMELINE_START - yearBCE) / TIMELINE_SPAN * 100).toFixed(2);
}

function renderTimeline() {
  const rail = document.getElementById('dynasty-rail');
  const dotsRow = document.getElementById('pharaoh-dots');
  const detailGrid = document.getElementById('era-details');

  // Build era blocks (flex proportional to years)
  ERAS.forEach(era => {
    const block = document.createElement('div');
    block.className = 'era-block';
    block.style.flex = era.years;
    block.title = era.zh + ' ' + era.period;
    block.innerHTML = `
      <div class="era-block-inner" style="background:${era.color};">
        <span class="era-label-zh">${era.zh}</span>
        <span class="era-label-period">${era.period}</span>
      </div>`;
    rail.appendChild(block);
  });

  // Approx year for each pharaoh (midpoint of reign)
  const PHARAOH_YEARS = {
    narmer:3100, djoser:2659, khufu:2577,
    hatshepsut:1469, thutmose3:1452, akhenaten:1345,
    tutankhamun:1327, ramesses2:1246, cleopatra7:40,
  };

  PHARAOHS.forEach(p => {
    const year = PHARAOH_YEARS[p.id];
    if (!year) return;
    const era = getEra(p.era);
    const hasPapyrus = p.papyrusLinks.length > 0;
    const pct = yearToPercent(year);
    const dot = document.createElement('div');
    dot.className = 'pharaoh-dot' + (hasPapyrus ? ' has-papyrus' : '');
    dot.style.left = pct + '%';
    dot.style.background = era ? era.color : 'var(--gold)';
    dot.onclick = () => openPharaohModal(p);
    dot.innerHTML = `<div class="pharaoh-dot-tip">${p.zh}</div>`;
    dotsRow.appendChild(dot);
  });

  // Era detail cards
  ERAS.forEach(era => {
    const pharaohsInEra = PHARAOHS.filter(p => p.era === era.id);
    const card = document.createElement('div');
    card.className = 'era-detail-card';
    card.style.borderLeftColor = era.color;
    const chips = pharaohsInEra.map(p => {
      const linked = p.papyrusLinks.length > 0;
      return `<span class="era-pharaoh-chip${linked ? ' linked' : ''}" onclick="openPharaohModal(getPharaoh('${p.id}'))">${p.icon} ${p.zh.split(' ')[0]}</span>`;
    }).join('');
    card.innerHTML = `
      <div class="era-detail-header">
        <span class="era-detail-name" style="color:${era.color}">${era.zh} Â· ${era.en}</span>
        <span class="era-detail-period">${era.period}</span>
      </div>
      <p class="era-detail-desc">${era.desc}</p>
      ${chips ? `<div class="era-pharaoh-chips">${chips}</div>` : ''}`;
    detailGrid.appendChild(card);
  });
}

// â”€â”€ PAPYRUS ORIGINS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function renderPapyrusOrigins() {
  const grid = document.getElementById('papyrus-origin-grid');
  PAPYRUS_PAINTINGS.forEach(pt => {
    const connectedPharaohs = PHARAOHS.filter(p => p.papyrusLinks.includes(pt.id));
    const card = document.createElement('div');
    card.className = 'papyrus-origin-card';
    card.style.borderTopColor = pt.eraColor;

    const timelineBar = pt.isUniversal
      ? `<div class="papyrus-timeline-fill full"></div>`
      : `<div class="papyrus-timeline-fill dot" style="left:${pt.timelinePos}%; background:${pt.eraColor};"></div>`;

    const pharaohChips = connectedPharaohs.map(p =>
      `<span class="pharaoh-chip" onclick="openPharaohById('${p.id}')">${p.icon} ${p.zh.split(' ')[0]}</span>`
    ).join('');

    card.innerHTML = `
      <div class="papyrus-origin-header">
        <span class="papyrus-origin-icon">${pt.icon}</span>
        <div class="papyrus-origin-names">
          <div class="papyrus-origin-name">${pt.zh}</div>
          <div class="papyrus-origin-en">${pt.en}</div>
          <span class="dynasty-badge" style="background:${pt.eraColor}CC;">${pt.dynasty}</span>
        </div>
      </div>
      <div class="papyrus-origin-year">${pt.year}</div>
      <div class="papyrus-origin-symbol">${pt.symbol}</div>
      <p class="papyrus-origin-note">${pt.note}</p>
      <div class="papyrus-timeline-bar">${timelineBar}</div>
      <div class="papyrus-timeline-label">${pt.isUniversal ? 'è´¯ç©¿æ•´ä¸ªæ³•è€æ—¶ä»£' : 'æ–°ç‹å›½ ç¬¬åå…«ç‹æœ'}</div>
      ${connectedPharaohs.length ? `
        <div class="papyrus-connected">
          <div class="papyrus-connected-label">ç›¸å…³æ³•è€ Â· RELATED PHARAOHS</div>
          ${pharaohChips}
        </div>` : ''}`;
    grid.appendChild(card);
  });
}

// â”€â”€ HISTORY EVENTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function renderHistoryEvents() {
  const grid = document.getElementById('event-cards');
  HISTORY_EVENTS.forEach(ev => {
    const era = getEra(ev.era) || { color:'var(--gold)' };
    const pharaohChips = ev.pharaohs.map(id => {
      const p = getPharaoh(id);
      return p ? `<span class="era-pharaoh-chip" onclick="openPharaohById('${id}')">${p.icon} ${p.zh.split(' ')[0]}</span>` : '';
    }).join('');
    const card = document.createElement('div');
    card.className = 'event-card';
    card.innerHTML = `
      <div class="event-card-header">
        <div class="event-num">${ev.num}</div>
        <div class="event-title">${ev.title}</div>
        <div class="event-year" style="color:${era.color};">${ev.year}</div>
      </div>
      <div class="event-card-body">
        ${ev.body}
        ${pharaohChips ? `<div class="event-pharaoh-row">${pharaohChips}</div>` : ''}
      </div>`;
    grid.appendChild(card);
  });
}

// â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

createStars();
renderEraFilters();
renderPharaohs();
renderPapyrusOrigins();
renderHistoryEvents();
</script>
<script src="../../../assets/js/data-bind.js"></script>
  <script src="../../../assets/js/edit-mode.js"></script>
</body>
</html>
