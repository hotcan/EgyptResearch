<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç¬¬ä¸€å¤©æ€è€ƒ Â· å¤åŸƒåŠä¼—ç¥æ®¿</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Cinzel:wght@400;600&family=Noto+Serif+SC:wght@300;400;600&display=swap" rel="stylesheet">
<style>
  .site-nav {
    position: relative;
    z-index: 20;
    display: flex;
    gap: 20px;
    align-items: center;
    padding: 16px 24px;
    font-size: 12px;
    border-bottom: 1px solid rgba(200,151,58,.12);
    background: rgba(10,8,6,.6);
    backdrop-filter: blur(8px);
    flex-wrap: wrap;
  }
  .site-nav a {
    color: rgba(200,151,58,.6);
    text-decoration: none;
    font-family: 'Cinzel', serif;
    letter-spacing: 1px;
    transition: color .2s;
  }
  .site-nav a:hover { color: #C9A84C; }
  .site-nav-sep { color: rgba(200,151,58,.25); }
  .site-nav-cur { color: rgba(212,196,160,.5); font-family: 'Cinzel', serif; letter-spacing: 1px; }

  .context-strip {
    position: relative;
    z-index: 10;
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px 20px 0;
  }
  .context-card {
    background: rgba(26,58,92,.15);
    border: 1px solid rgba(200,151,58,.18);
    border-left: 3px solid rgba(200,151,58,.5);
    padding: 14px 20px;
    display: flex;
    gap: 20px;
    align-items: flex-start;
    flex-wrap: wrap;
  }
  .context-eyebrow {
    font-family: 'Cinzel', serif;
    font-size: 10px;
    letter-spacing: 3px;
    color: #C9A84C;
    opacity: .7;
    margin-bottom: 4px;
  }
  .context-text {
    font-size: 13px;
    color: rgba(212,196,160,.75);
    line-height: 1.7;
    flex: 1;
    min-width: 240px;
  }
  .context-link {
    align-self: center;
    white-space: nowrap;
    font-family: 'Cinzel', serif;
    font-size: 11px;
    letter-spacing: 1px;
    color: #C9A84C;
    text-decoration: none;
    border: 1px solid rgba(200,151,58,.3);
    padding: 6px 14px;
    transition: all .2s;
  }
  .context-link:hover { background: rgba(200,151,58,.1); }
</style>
<style>
  :root {
    --gold: #C9A84C;
    --gold-light: #F0D080;
    --gold-dark: #8B6914;
    --lapis: #1A3A5C;
    --lapis-light: #2A5480;
    --sand: #F5E6C8;
    --sand-dark: #D4C4A0;
    --papyrus: #EDD9A3;
    --black: #0A0806;
    --red-ancient: #8B2020;
    --teal: #1A7A6E;
    --bg: #0D0B08;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    position: relative;
    background: var(--bg);
    color: var(--sand);
    font-family: 'Noto Serif SC', serif;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Starfield background */

  .stars {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 0;
    overflow: hidden;
  }
  .star {
    position: absolute;
    width: 2px;
    height: 2px;
    background: var(--gold-light);
    border-radius: 50%;
    animation: twinkle var(--d, 3s) ease-in-out infinite var(--delay, 0s);
    opacity: var(--o, 0.6);
  }
  @keyframes twinkle {
    0%, 100% { opacity: var(--o, 0.6); transform: scale(1); }
    50% { opacity: 0.1; transform: scale(0.5); }
  }

  /* Header */
  header {
    position: relative;
    z-index: 10;
    text-align: center;
    padding: 60px 20px 40px;
    border-bottom: 1px solid rgba(201,168,76,0.3);
  }

  .hieroglyph-band {
    font-size: 24px;
    letter-spacing: 12px;
    color: var(--gold);
    opacity: 0.5;
    margin-bottom: 20px;
    font-family: serif;
  }

  h1 {
    font-family: 'Cinzel Decorative', cursive;
    font-size: clamp(28px, 6vw, 56px);
    color: var(--gold-light);
    text-shadow: 0 0 40px rgba(201,168,76,0.5), 0 0 80px rgba(201,168,76,0.2);
    letter-spacing: 4px;
    line-height: 1.2;
  }
  h1 span {
    display: block;
    font-size: 0.45em;
    font-family: 'Noto Serif SC', serif;
    color: var(--sand-dark);
    letter-spacing: 8px;
    margin-top: 8px;
    font-weight: 300;
  }

  .subtitle {
    margin-top: 16px;
    font-size: 13px;
    letter-spacing: 4px;
    color: rgba(201,168,76,0.6);
    text-transform: uppercase;
    font-family: 'Cinzel', serif;
  }

  /* Navigation tabs */
  .nav-tabs {
    position: relative;
    z-index: 10;
    display: flex;
    justify-content: center;
    gap: 0;
    margin: 40px auto;
    max-width: 800px;
    border: 1px solid rgba(201,168,76,0.3);
  }

  .nav-tab {
    flex: 1;
    padding: 14px 20px;
    background: transparent;
    border: none;
    border-right: 1px solid rgba(201,168,76,0.2);
    color: rgba(201,168,76,0.5);
    font-family: 'Cinzel', serif;
    font-size: 13px;
    letter-spacing: 2px;
    cursor: pointer;
    transition: all 0.3s;
    text-align: center;
  }
  .nav-tab:last-child { border-right: none; }
  .nav-tab:hover { background: rgba(201,168,76,0.08); color: var(--gold); }
  .nav-tab.active {
    background: rgba(201,168,76,0.12);
    color: var(--gold-light);
    box-shadow: inset 0 -2px 0 var(--gold);
  }

  /* Main content area */
  .main {
    position: relative;
    z-index: 10;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px 80px;
  }

  .tab-content { display: none; }
  .tab-content.active { display: block; }

  /* ====== PANTHEON VIEW ====== */
  .pantheon-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 24px;
    margin-top: 20px;
  }

  .god-card {
    background: linear-gradient(145deg, rgba(26,58,92,0.4), rgba(10,8,6,0.8));
    border: 1px solid rgba(201,168,76,0.25);
    padding: 0;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    overflow: hidden;
  }

  .god-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(201,168,76,0.05), transparent);
    opacity: 0;
    transition: opacity 0.3s;
  }

  .god-card:hover {
    border-color: var(--gold);
    transform: translateY(-4px);
    box-shadow: 0 12px 40px rgba(201,168,76,0.2);
  }
  .god-card:hover::before { opacity: 1; }

  .god-avatar {
    width: 100%;
    height: 160px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 72px;
    background: rgba(0,0,0,0.3);
    border-bottom: 1px solid rgba(201,168,76,0.15);
    position: relative;
  }

  .god-domain-badge {
    position: absolute;
    top: 8px;
    right: 8px;
    padding: 3px 8px;
    font-size: 10px;
    letter-spacing: 1px;
    font-family: 'Cinzel', serif;
    border: 1px solid currentColor;
  }

  .god-info {
    padding: 16px;
  }

  .god-name {
    font-family: 'Cinzel', serif;
    font-size: 18px;
    color: var(--gold-light);
    letter-spacing: 2px;
  }
  .god-name-zh {
    font-size: 12px;
    color: var(--sand-dark);
    margin-top: 2px;
    letter-spacing: 2px;
  }

  .god-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    margin-top: 10px;
  }
  .god-tag {
    font-size: 10px;
    padding: 2px 8px;
    background: rgba(201,168,76,0.1);
    border: 1px solid rgba(201,168,76,0.2);
    color: var(--gold);
    letter-spacing: 1px;
    font-family: 'Cinzel', serif;
  }

  /* ====== RELATIONSHIP GRAPH ====== */
  #relation-canvas-wrap {
    position: relative;
    background: rgba(0,0,0,0.4);
    border: 1px solid rgba(201,168,76,0.2);
    border-radius: 0;
    overflow: hidden;
    height: 580px;
  }

  #relation-canvas {
    width: 100%;
    height: 100%;
    display: block;
  }

  .canvas-legend {
    position: absolute;
    bottom: 16px;
    left: 16px;
    display: flex;
    gap: 16px;
    font-size: 11px;
    font-family: 'Cinzel', serif;
    letter-spacing: 1px;
  }

  .legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
    color: var(--sand-dark);
  }

  .legend-line {
    width: 28px;
    height: 2px;
  }

  /* ====== BLESSINGS VIEW ====== */
  .blessings-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 24px;
    margin-top: 20px;
  }

  .blessing-card {
    border: 1px solid rgba(201,168,76,0.2);
    background: linear-gradient(160deg, rgba(26,58,92,0.3), rgba(10,8,6,0.7));
    padding: 28px;
    position: relative;
    overflow: hidden;
    cursor: pointer;
    transition: all 0.3s;
  }

  .blessing-card::after {
    content: '';
    position: absolute;
    top: 0; right: 0;
    width: 60px; height: 60px;
    background: linear-gradient(135deg, transparent 50%, rgba(201,168,76,0.1) 50%);
  }

  .blessing-card:hover {
    border-color: rgba(201,168,76,0.6);
    box-shadow: 0 8px 30px rgba(201,168,76,0.15);
    transform: translateY(-2px);
  }

  .blessing-icon { font-size: 36px; margin-bottom: 12px; }

  .blessing-title {
    font-family: 'Cinzel', serif;
    font-size: 16px;
    color: var(--gold-light);
    letter-spacing: 2px;
    margin-bottom: 8px;
  }

  .blessing-gods {
    font-size: 12px;
    color: var(--gold);
    opacity: 0.7;
    letter-spacing: 1px;
    font-family: 'Cinzel', serif;
    margin-bottom: 10px;
  }

  .blessing-desc {
    font-size: 14px;
    line-height: 1.8;
    color: var(--sand-dark);
  }

  /* ====== MODAL ====== */
  .modal-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.85);
    z-index: 100;
    align-items: center;
    justify-content: center;
    padding: 20px;
    backdrop-filter: blur(4px);
  }
  .modal-overlay.open { display: flex; }

  .modal {
    background: linear-gradient(145deg, #0F1A2E, #0A0806);
    border: 1px solid rgba(201,168,76,0.4);
    max-width: 680px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
    animation: modalIn 0.35s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }

  @keyframes modalIn {
    from { opacity: 0; transform: scale(0.9) translateY(20px); }
    to { opacity: 1; transform: scale(1) translateY(0); }
  }

  .modal-header {
    display: flex;
    align-items: center;
    gap: 20px;
    padding: 28px;
    border-bottom: 1px solid rgba(201,168,76,0.2);
  }

  .modal-avatar { font-size: 60px; }

  .modal-title {
    font-family: 'Cinzel Decorative', cursive;
    font-size: 24px;
    color: var(--gold-light);
    letter-spacing: 2px;
  }

  .modal-subtitle {
    font-size: 13px;
    color: var(--sand-dark);
    margin-top: 4px;
    letter-spacing: 2px;
  }

  .modal-body { padding: 28px; }

  .modal-section {
    margin-bottom: 24px;
  }

  .modal-section-title {
    font-family: 'Cinzel', serif;
    font-size: 11px;
    letter-spacing: 3px;
    color: var(--gold);
    text-transform: uppercase;
    border-bottom: 1px solid rgba(201,168,76,0.2);
    padding-bottom: 8px;
    margin-bottom: 12px;
  }

  .modal-section p { line-height: 2; font-size: 14px; color: var(--sand); }

  .attr-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
  }

  .attr-item {
    background: rgba(201,168,76,0.06);
    border: 1px solid rgba(201,168,76,0.15);
    padding: 12px;
  }

  .attr-label {
    font-size: 10px;
    letter-spacing: 2px;
    color: var(--gold);
    font-family: 'Cinzel', serif;
    margin-bottom: 4px;
  }

  .attr-value {
    font-size: 14px;
    color: var(--sand);
  }

  .relations-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .relation-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px 12px;
    border: 1px solid rgba(201,168,76,0.1);
    background: rgba(201,168,76,0.04);
  }

  .relation-type {
    font-size: 10px;
    letter-spacing: 1px;
    font-family: 'Cinzel', serif;
    min-width: 60px;
  }

  .relation-name {
    color: var(--gold-light);
    font-size: 14px;
    cursor: pointer;
    text-decoration: underline;
    text-decoration-color: rgba(201,168,76,0.3);
  }
  .relation-name:hover { color: var(--gold); }

  .modal-close {
    position: absolute;
    top: 16px; right: 16px;
    background: none;
    border: 1px solid rgba(201,168,76,0.3);
    color: var(--gold);
    width: 32px; height: 32px;
    cursor: pointer;
    font-size: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
  }
  .modal-close:hover { background: rgba(201,168,76,0.1); border-color: var(--gold); }

  /* Decorative divider */
  .divider {
    text-align: center;
    margin: 40px 0 20px;
    position: relative;
    color: var(--gold);
    opacity: 0.4;
    font-size: 18px;
    letter-spacing: 16px;
  }
  .divider::before, .divider::after {
    content: '';
    position: absolute;
    top: 50%;
    width: 30%;
    height: 1px;
    background: linear-gradient(to right, transparent, rgba(201,168,76,0.4));
  }
  .divider::before { left: 0; }
  .divider::after { right: 0; background: linear-gradient(to left, transparent, rgba(201,168,76,0.4)); }

  /* Section header */
  .section-header {
    text-align: center;
    margin-bottom: 32px;
  }
  .section-header h2 {
    font-family: 'Cinzel Decorative', cursive;
    font-size: 22px;
    color: var(--gold-light);
    letter-spacing: 4px;
  }
  .section-header p {
    margin-top: 8px;
    font-size: 13px;
    color: var(--sand-dark);
    letter-spacing: 2px;
  }

  /* Canvas tooltip */
  .canvas-tooltip {
    position: absolute;
    background: rgba(13,11,8,0.95);
    border: 1px solid rgba(201,168,76,0.4);
    padding: 10px 14px;
    font-size: 12px;
    pointer-events: none;
    z-index: 50;
    display: none;
    font-family: 'Cinzel', serif;
    color: var(--gold-light);
    letter-spacing: 1px;
    max-width: 160px;
  }

  /* Filter pills */
  .filter-row {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 24px;
    justify-content: center;
  }

  .filter-pill {
    padding: 6px 16px;
    border: 1px solid rgba(201,168,76,0.25);
    background: transparent;
    color: var(--sand-dark);
    font-family: 'Cinzel', serif;
    font-size: 11px;
    letter-spacing: 2px;
    cursor: pointer;
    transition: all 0.2s;
  }
  .filter-pill:hover { border-color: var(--gold); color: var(--gold); }
  .filter-pill.active { background: rgba(201,168,76,0.15); border-color: var(--gold); color: var(--gold-light); }

  /* Scroll animation */
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-in { animation: fadeUp 0.5s ease forwards; }

  /* Story section */
  .myth-cards {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
    gap: 24px;
    margin-top: 20px;
  }

  .myth-card {
    border: 1px solid rgba(201,168,76,0.2);
    background: rgba(10,8,6,0.7);
    overflow: hidden;
    cursor: pointer;
    transition: all 0.3s;
  }
  .myth-card:hover {
    border-color: rgba(201,168,76,0.5);
    box-shadow: 0 8px 30px rgba(0,0,0,0.5);
  }

  .myth-header {
    padding: 20px 24px 16px;
    border-bottom: 1px solid rgba(201,168,76,0.1);
    background: linear-gradient(135deg, rgba(26,58,92,0.3), transparent);
  }

  .myth-num {
    font-size: 10px;
    letter-spacing: 3px;
    color: var(--gold);
    font-family: 'Cinzel', serif;
    opacity: 0.6;
    margin-bottom: 6px;
  }

  .myth-title {
    font-family: 'Cinzel', serif;
    font-size: 17px;
    color: var(--gold-light);
    letter-spacing: 1px;
  }

  .myth-body {
    padding: 16px 24px 20px;
    font-size: 14px;
    line-height: 2;
    color: var(--sand-dark);
  }

  .myth-gods-row {
    padding: 12px 24px;
    border-top: 1px solid rgba(201,168,76,0.1);
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
  }

  .myth-god-chip {
    font-size: 11px;
    padding: 3px 10px;
    border: 1px solid rgba(201,168,76,0.25);
    color: var(--gold);
    font-family: 'Cinzel', serif;
    letter-spacing: 1px;
    cursor: pointer;
    transition: all 0.2s;
  }
  .myth-god-chip:hover { background: rgba(201,168,76,0.1); }

  /* Scrollbar */
  ::-webkit-scrollbar { width: 4px; }
  ::-webkit-scrollbar-track { background: rgba(201,168,76,0.05); }
  ::-webkit-scrollbar-thumb { background: rgba(201,168,76,0.3); }

  @media (max-width: 600px) {
    .nav-tab { font-size: 10px; padding: 12px 8px; letter-spacing: 0; }
    .pantheon-grid { grid-template-columns: 1fr 1fr; gap: 12px; }
  }
</style>
</head>
<body>

<!-- Site Nav -->
<nav class="site-nav">
  <a href="../../../index.html">æ—…è¡Œç›®å½•</a>
  <span class="site-nav-sep">/</span>
  <a href="../index.html">ç¬¬ä¸€å¤©</a>
  <span class="site-nav-sep">/</span>
  <span class="site-nav-cur">å†å² Â· ä¼—ç¥æ®¿</span>
</nav>

<!-- Context Strip -->
<div class="context-strip">
  <div class="context-card">
    <div style="flex:1; min-width:240px;">
      <div class="context-eyebrow">Day 01 Â· History Â· 2026.02.22</div>
      <div class="context-text">åœ¨é£å¾€å¼€ç½—çš„èˆªç­ä¸Šï¼Œæˆ‘æŠŠè¯»åˆ°çš„å¤åŸƒåŠä¼—ç¥å…³ç³»æ•´ç†æˆè¿™å¼ å¯äº¤äº’çš„å…³ç³»å›¾â€”â€”ä¸æ˜¯ä¸ºäº†èƒŒåå­—ï¼Œè€Œæ˜¯ä¸ºäº†åœ¨è½åœ°ä¹‹åï¼Œè„‘å­é‡Œæœ‰ä¸€å¥—ç†è§£åŸƒåŠæ–‡æ˜åº•å±‚é€»è¾‘çš„åæ ‡ç³»ã€‚ç‚¹å‡»ä»»æ„ç¥çµæŸ¥çœ‹è¯¦æƒ…ï¼Œåˆ‡æ¢ã€Œå…³ç³»å›¾ã€æ ‡ç­¾å¯ä»¥çœ‹åˆ°ç¥çµä¹‹é—´çš„å®¶æ—ã€åŒç›Ÿä¸å¯¹ç«‹å…³ç³»ã€‚</div>
    </div>
    <a class="context-link" href="../action/index.html">æŸ¥çœ‹ç¬¬ä¸€å¤©è¡Œç¨‹ â†’</a>
  </div>
</div>

<!-- Starfield -->
<div class="stars" id="stars"></div>

<!-- Header -->
<header>
  <div class="hieroglyph-band">ğ“‚€ ğ“…ƒ ğ“†£ ğ“‹´ ğ“ ğ“Š– ğ“ˆ– ğ“‚‹ ğ“‡¯</div>
  <h1 data-key="days.0.history_title">AEGYPTUS DEUS<span>åŸƒ åŠ ä¼— ç¥ æ®¿</span></h1>
  <p class="subtitle" data-key="days.0.history_subtitle">Pantheon Â· Relationships Â· Sacred Blessings</p>
</header>

<!-- Navigation -->
<div class="nav-tabs">
  <button class="nav-tab active" onclick="switchTab('pantheon')">ğ“…ƒ ä¼—ç¥æ®¿</button>
  <button class="nav-tab" onclick="switchTab('relations')">ğ“†£ ç¥çµå…³ç³»</button>
  <button class="nav-tab" onclick="switchTab('blessings')">ğ“‚€ ç¥åœ£åº‡ä½‘</button>
  <button class="nav-tab" onclick="switchTab('myths')">ğ“‡¯ ç¥è¯ä¼ è¯´</button>
</div>

<!-- Main -->
<div class="main">

  <!-- PANTHEON TAB -->
  <div id="tab-pantheon" class="tab-content active">
    <div class="section-header">
      <h2>åŸƒåŠä¸»ç¥</h2>
      <p>ç‚¹å‡»ç¥çµï¼ŒæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ä¸ç¥è¯æ•…äº‹</p>
    </div>
    <div class="filter-row" id="domain-filters"></div>
    <div class="pantheon-grid" id="pantheon-grid"></div>
  </div>

  <!-- RELATIONS TAB -->
  <div id="tab-relations" class="tab-content">
    <div class="section-header">
      <h2>ç¥çµå…³ç³»å›¾è°±</h2>
      <p>æ‚¬åœèŠ‚ç‚¹æŸ¥çœ‹ä¿¡æ¯ Â· ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</p>
    </div>
    <div id="relation-canvas-wrap">
      <canvas id="relation-canvas"></canvas>
      <div class="canvas-tooltip" id="canvas-tooltip"></div>
      <div class="canvas-legend">
        <div class="legend-item"><div class="legend-line" style="background:#C9A84C"></div>å®¶æ—å…³ç³»</div>
        <div class="legend-item"><div class="legend-line" style="background:#1A7A6E"></div>å‹ç›Ÿå…³ç³»</div>
        <div class="legend-item"><div class="legend-line" style="background:#8B2020;"></div>å¯¹ç«‹å…³ç³»</div>
      </div>
    </div>
  </div>

  <!-- BLESSINGS TAB -->
  <div id="tab-blessings" class="tab-content">
    <div class="section-header">
      <h2>ç¥åœ£åº‡ä½‘é¢†åŸŸ</h2>
      <p>å¤åŸƒåŠäººå‘ä¼—ç¥ç¥ˆæ±‚ä¸åŒé¢†åŸŸçš„åº‡æŠ¤</p>
    </div>
    <div class="blessings-grid" id="blessings-grid"></div>
  </div>

  <!-- MYTHS TAB -->
  <div id="tab-myths" class="tab-content">
    <div class="section-header">
      <h2>ç¥è¯ä¼ è¯´</h2>
      <p>åŸƒåŠæœ€é‡è¦çš„ç¥è¯æ•…äº‹</p>
    </div>
    <div class="myth-cards" id="myth-cards"></div>
  </div>

</div>

<!-- Modal -->
<div class="modal-overlay" id="modal-overlay" onclick="closeModal(event)">
  <div class="modal" id="modal">
    <button class="modal-close" onclick="closeModal()">âœ•</button>
    <div class="modal-header" id="modal-header"></div>
    <div class="modal-body" id="modal-body"></div>
  </div>
</div>

<script>
// ===== DATA =====
const GODS = [
  {
    id: 'ra', name: 'Ra', zh: 'æ‹‰', emoji: 'â˜€ï¸',
    domain: 'å¤ªé˜³', domainEn: 'SUN',
    color: '#C9A84C',
    desc: 'æ‹‰æ˜¯å¤ªé˜³ç¥ï¼Œè¢«è§†ä¸ºæ‰€æœ‰ç¥çµä¹‹ç‹ã€‚æ¯å¤©ä»–ä¹˜åå¤ªé˜³èˆ¹ä»ä¸œæ–¹å‡èµ·ï¼Œç©¿è¶Šå¤©ç©ºï¼Œåœ¨å¤œæ™šé€šè¿‡å†¥ç•Œå†ç”Ÿã€‚ä»–æ˜¯åˆ›é€ ä¹‹ç¥ï¼Œç”Ÿå‘½çš„æºæ³‰ã€‚',
    attributes: { 'è±¡å¾': 'å¤ªé˜³åœ†ç›˜ã€æƒæ–', 'å´‡æ‹œä¸­å¿ƒ': 'èµ«åˆ©å¥¥æ³¢åˆ©æ–¯', 'åŠ¨ç‰©': 'é¹°ã€çŒ«', 'å¤´è¡”': 'ä¼—ç¥ä¹‹ç‹' },
    roles: ['åˆ›é€ ', 'å¤ªé˜³', 'ç”Ÿå‘½', 'æƒåŠ›'],
    relations: [
      { type: 'å„¿å­', name: 'Thoth', zh: 'æ‰˜ç‰¹' },
      { type: 'åŒ–èº«', name: 'Horus', zh: 'è·é²æ–¯' },
      { type: 'æ•Œå¯¹', name: 'Apep', zh: 'é˜¿è´æ™®' }
    ],
    blessings: ['å…‰æ˜ä¸ç”Ÿå‘½', 'æƒå¨ä¸æ­£ä¹‰', 'æ¯æ—¥æ›´æ–°']
  },
  {
    id: 'osiris', name: 'Osiris', zh: 'å¥¥è¥¿é‡Œæ–¯', emoji: 'ğŸŒ¿',
    domain: 'æ­»äº¡', domainEn: 'DEATH',
    color: '#2A5480',
    desc: 'å¥¥è¥¿é‡Œæ–¯æ˜¯å†¥ç•Œä¹‹ç¥ã€å¤æ´»ä¹‹ç¥ä¸å†œä¸šä¹‹ç¥ã€‚ä»–è¢«å¼Ÿå¼Ÿèµ›ç‰¹æ€æ­»å¹¶è‚¢è§£ï¼Œå¦»å­ä¼Šè¥¿æ–¯å°†å…¶å¤æ´»ã€‚ä»–æ˜¯æ­»äº¡ä¸å†ç”Ÿå¾ªç¯çš„è±¡å¾ã€‚',
    attributes: { 'è±¡å¾': 'è¿æ·ã€æƒæ–ã€é˜¿æå¤«ç‹å† ', 'å´‡æ‹œä¸­å¿ƒ': 'é˜¿æ‹œå¤šæ–¯', 'åŠ¨ç‰©': 'å…¬ç‰›', 'é¢œè‰²': 'ç»¿è‰²ã€é»‘è‰²' },
    roles: ['æ­»äº¡', 'å¤æ´»', 'å†œä¸š', 'å®¡åˆ¤'],
    relations: [
      { type: 'å¦»å­', name: 'Isis', zh: 'ä¼Šè¥¿æ–¯' },
      { type: 'å„¿å­', name: 'Horus', zh: 'è·é²æ–¯' },
      { type: 'å…„å¼Ÿ', name: 'Set', zh: 'èµ›ç‰¹' },
      { type: 'å§å¦¹', name: 'Nephthys', zh: 'å¥ˆèŠ™è’‚æ–¯' }
    ],
    blessings: ['æ¥ç”Ÿå¹³å®‰', 'å†œä¸šä¸°æ”¶', 'æ°¸æ’å¤æ´»']
  },
  {
    id: 'isis', name: 'Isis', zh: 'ä¼Šè¥¿æ–¯', emoji: 'ğŸª¶',
    domain: 'é­”æ³•', domainEn: 'MAGIC',
    color: '#8B2020',
    desc: 'ä¼Šè¥¿æ–¯æ˜¯é­”æ³•å¥³ç¥ã€æ¯æ€§ä¸æ²»æ„ˆä¹‹ç¥ã€‚å¥¹å¯¹ä¸ˆå¤«å¥¥è¥¿é‡Œæ–¯çš„å¿ è¯šã€å¯¹å„¿å­è·é²æ–¯çš„å®ˆæŠ¤ï¼Œä½¿å¥¹æˆä¸ºåŸƒåŠæœ€å—æ•¬ä»°çš„å¥³ç¥ã€‚å¥¹çš„ç¿…è†€èƒ½å¸­å·å¤§åœ°ã€‚',
    attributes: { 'è±¡å¾': 'ç¿…è†€ã€å®åº§', 'å´‡æ‹œä¸­å¿ƒ': 'è²è±å²›', 'åŠ¨ç‰©': 'é¸¢ã€æ¯ç‰›', 'å¤´è¡”': 'é­”æ³•å¥³ç‹' },
    roles: ['é­”æ³•', 'æ²»æ„ˆ', 'æ¯æ€§', 'ä¿æŠ¤'],
    relations: [
      { type: 'ä¸ˆå¤«', name: 'Osiris', zh: 'å¥¥è¥¿é‡Œæ–¯' },
      { type: 'å„¿å­', name: 'Horus', zh: 'è·é²æ–¯' },
      { type: 'å…„å¼Ÿ', name: 'Set', zh: 'èµ›ç‰¹' },
      { type: 'å§å¦¹', name: 'Nephthys', zh: 'å¥ˆèŠ™è’‚æ–¯' }
    ],
    blessings: ['æ¯äº²ä¸å­©å­ä¿æŠ¤', 'é­”æ³•ä¸æ²»æ„ˆ', 'èˆªæµ·å¹³å®‰']
  },
  {
    id: 'horus', name: 'Horus', zh: 'è·é²æ–¯', emoji: 'ğŸ¦…',
    domain: 'å¤©ç©º', domainEn: 'SKY',
    color: '#1A7A6E',
    desc: 'è·é²æ–¯æ˜¯å¤©ç©ºä¹‹ç¥ï¼Œä»¥é¹°ä¸ºå½¢ã€‚ä»–çš„å·¦çœ¼æ˜¯æœˆäº®ï¼Œå³çœ¼æ˜¯å¤ªé˜³ã€‚æ³•è€è¢«è§†ä¸ºè·é²æ–¯çš„åŒ–èº«ã€‚ä»–ä¸èµ›ç‰¹çš„æ¼«é•¿æˆ˜äº‰ï¼Œæœ€ç»ˆèµ¢å¾—äº†å¯¹åŸƒåŠçš„ç»Ÿæ²»æƒã€‚',
    attributes: { 'è±¡å¾': 'è·é²æ–¯ä¹‹çœ¼ï¼ˆç“¦å‰ç‰¹ï¼‰', 'å´‡æ‹œä¸­å¿ƒ': 'åŸƒå¾·å¯Œ', 'åŠ¨ç‰©': 'é¹°', 'å¤´è¡”': 'ä¸¤åœ°ä¹‹ç‹' },
    roles: ['å¤©ç©º', 'ç‹æƒ', 'æˆ˜äº‰', 'ä¿æŠ¤'],
    relations: [
      { type: 'çˆ¶äº²', name: 'Osiris', zh: 'å¥¥è¥¿é‡Œæ–¯' },
      { type: 'æ¯äº²', name: 'Isis', zh: 'ä¼Šè¥¿æ–¯' },
      { type: 'æ•Œå¯¹', name: 'Set', zh: 'èµ›ç‰¹' },
      { type: 'åŒ–èº«', name: 'Ra', zh: 'æ‹‰' }
    ],
    blessings: ['ç‹æƒä¿æŠ¤', 'æˆ˜äº‰èƒœåˆ©', 'è§†åŠ›ä¸å¥åº·']
  },
  {
    id: 'thoth', name: 'Thoth', zh: 'æ‰˜ç‰¹', emoji: 'ğŸ“œ',
    domain: 'æ™ºæ…§', domainEn: 'WISDOM',
    color: '#5A4080',
    desc: 'æ‰˜ç‰¹æ˜¯æ™ºæ…§ä¹‹ç¥ã€ä¹¦å†™ä¹‹ç¥ã€æœˆäº®ä¹‹ç¥å’Œæ—¶é—´çš„è®°å½•è€…ã€‚ä»–æ˜¯ç¥çµçš„ä¹¦è®°å®˜ï¼Œåœ¨å¥¥è¥¿é‡Œæ–¯çš„å®¡åˆ¤å…è®°å½•äº¡è€…çš„çµé­‚é‡é‡ã€‚æ®è¯´ä»–å‘æ˜äº†è±¡å½¢æ–‡å­—ã€‚',
    attributes: { 'è±¡å¾': 'æœ±é¹­ã€èŠ¦è‹‡ç¬”ã€æœˆäº®', 'å´‡æ‹œä¸­å¿ƒ': 'èµ«å°”è«æ³¢åˆ©æ–¯', 'åŠ¨ç‰©': 'æœ±é¹­ã€ç‹’ç‹’', 'å¤´è¡”': 'ä¸¤æ¬¡ä¼Ÿå¤§è€…' },
    roles: ['æ™ºæ…§', 'ä¹¦å†™', 'æœˆäº®', 'é­”æ³•'],
    relations: [
      { type: 'çˆ¶äº²ï¼ˆè¯´æ³•ä¹‹ä¸€ï¼‰', name: 'Ra', zh: 'æ‹‰' },
      { type: 'åŠ©æ‰‹', name: 'Osiris', zh: 'å¥¥è¥¿é‡Œæ–¯' },
      { type: 'åŒç›Ÿ', name: 'Isis', zh: 'ä¼Šè¥¿æ–¯' }
    ],
    blessings: ['å­¦ä¹ ä¸æ™ºæ…§', 'ä¹¦å†™ä¸æ–‡å­—', 'æœˆå…‰åº‡æŠ¤']
  },
  {
    id: 'set', name: 'Set', zh: 'èµ›ç‰¹', emoji: 'ğŸŒªï¸',
    domain: 'æ··ä¹±', domainEn: 'CHAOS',
    color: '#8B2020',
    desc: 'èµ›ç‰¹æ˜¯æ··ä¹±ã€é£æš´ä¸æ²™æ¼ ä¹‹ç¥ã€‚ä»–æ€æ­»äº†å…„é•¿å¥¥è¥¿é‡Œæ–¯ï¼Œä¸ä¾„å­è·é²æ–¯é•¿æœŸäº‰æ–—ã€‚å°½ç®¡ä»£è¡¨æ··ä¹±ï¼Œä»–ä¹Ÿæ˜¯æŠµå¾¡é‚ªè›‡é˜¿è´æ™®çš„å®ˆæŠ¤è€…ã€‚',
    attributes: { 'è±¡å¾': 'èµ›ç‰¹åŠ¨ç‰©ï¼ˆç¥ç§˜ç”Ÿç‰©ï¼‰', 'å´‡æ‹œä¸­å¿ƒ': 'å¥¥å§†åšæ–¯', 'åŠ¨ç‰©': 'èµ›ç‰¹å…½ã€é©´', 'é¢†åŸŸ': 'æ²™æ¼ ã€é›·æš´' },
    roles: ['æ··ä¹±', 'é£æš´', 'æ²™æ¼ ', 'åŠ›é‡'],
    relations: [
      { type: 'å…„å¼Ÿ', name: 'Osiris', zh: 'å¥¥è¥¿é‡Œæ–¯' },
      { type: 'å§å¦¹/å¦»å­', name: 'Nephthys', zh: 'å¥ˆèŠ™è’‚æ–¯' },
      { type: 'æ•Œå¯¹', name: 'Horus', zh: 'è·é²æ–¯' }
    ],
    blessings: ['æ²™æ¼ æ—…è¡Œä¿æŠ¤', 'é£æš´åŠ›é‡', 'é©±é™¤æ¶è›‡']
  },
  {
    id: 'anubis', name: 'Anubis', zh: 'é˜¿åŠªæ¯”æ–¯', emoji: 'ğŸº',
    domain: 'äº¡è€…', domainEn: 'DEAD',
    color: '#2C2C2C',
    desc: 'é˜¿åŠªæ¯”æ–¯æ˜¯äº¡è€…çš„å®ˆæŠ¤è€…å’Œæœ¨ä¹ƒä¼ŠåŒ–çš„ä¿æŠ¤ç¥ï¼Œä»¥é»‘è‰²èƒ¡ç‹¼ä¸ºå½¢ã€‚ä»–å¼•å¯¼äº¡é­‚å‰å¾€å®¡åˆ¤å…ï¼Œç›‘ç£ç§°é‡å¿ƒè„çš„ä»ªå¼ï¼Œä¿æŠ¤å¢“åœ°ä¸è¢«ä¾µçŠ¯ã€‚',
    attributes: { 'è±¡å¾': 'é»‘è‰²èƒ¡ç‹¼ã€å¤©å¹³', 'å´‡æ‹œä¸­å¿ƒ': 'é‡Œç§‘æ³¢åˆ©æ–¯', 'åŠ¨ç‰©': 'èƒ¡ç‹¼', 'å¤´è¡”': 'æ­»è€…ä¹‹ä¸»' },
    roles: ['äº¡è€…ä¿æŠ¤', 'é˜²è…æœ¯', 'å®¡åˆ¤', 'å¼•å¯¼'],
    relations: [
      { type: 'çˆ¶äº²ï¼ˆä¸€è¯´ï¼‰', name: 'Osiris', zh: 'å¥¥è¥¿é‡Œæ–¯' },
      { type: 'æ¯äº²ï¼ˆä¸€è¯´ï¼‰', name: 'Nephthys', zh: 'å¥ˆèŠ™è’‚æ–¯' },
      { type: 'åŠ©æ‰‹', name: 'Thoth', zh: 'æ‰˜ç‰¹' }
    ],
    blessings: ['äº¡è€…å®‰æ¯', 'å¢“åœ°ä¿æŠ¤', 'å®‰å…¨è¿›å…¥æ¥ä¸–']
  },
  {
    id: 'hathor', name: 'Hathor', zh: 'å“ˆæ‰˜å°”', emoji: 'ğŸ¶',
    domain: 'çˆ±ä¸ç¾', domainEn: 'LOVE',
    color: '#8B4560',
    desc: 'å“ˆæ‰˜å°”æ˜¯çˆ±ã€ç¾ã€éŸ³ä¹ã€èˆè¹ˆã€ä¸°é¥¶ä¸å–œæ‚¦çš„å¥³ç¥ã€‚å¥¹ä»¥æ¯ç‰›å½¢è±¡ç¤ºäººï¼Œä¹Ÿæ˜¯å¤©å ‚ä¹‹æ¯ã€‚å¥¹åŒæ—¶ä¹Ÿæœ‰æ¯ç­æ€§çš„ä¸€é¢ï¼Œä¼ è¯´æ›¾å¥‰å‘½æƒ©ç½šäººç±»ã€‚',
    attributes: { 'è±¡å¾': 'æ¯ç‰›è§’ä¸å¤ªé˜³ç›˜ã€é•œå­ã€å‰é“ƒ', 'å´‡æ‹œä¸­å¿ƒ': 'ä¸¹å¾·æ‹‰', 'åŠ¨ç‰©': 'æ¯ç‰›', 'å¤´è¡”': 'è¥¿æ–¹çš„å¥³ä¸»äºº' },
    roles: ['çˆ±', 'ç¾', 'éŸ³ä¹', 'ä¸°é¥¶'],
    relations: [
      { type: 'æœ‰æ—¶è§†ä¸º', name: 'Ra', zh: 'æ‹‰ä¹‹çœ¼' },
      { type: 'æœ‰æ—¶ç­‰åŒ', name: 'Isis', zh: 'ä¼Šè¥¿æ–¯' }
    ],
    blessings: ['çˆ±æƒ…ä¸å©šå§»', 'éŸ³ä¹ä¸èˆè¹ˆ', 'æ¯å©´ä¿æŠ¤']
  },
  {
    id: 'bastet', name: 'Bastet', zh: 'èŠ­ä¸ç‰¹', emoji: 'ğŸ±',
    domain: 'çŒ«ä¸å®¶', domainEn: 'HOME',
    color: '#4A3060',
    desc: 'èŠ­ä¸ç‰¹æ˜¯çŒ«å¥³ç¥ï¼Œå®¶åº­ã€ç”Ÿè‚²å’Œä¿æŠ¤ä¹‹ç¥ã€‚èµ·åˆä»¥ç‹®å­å½¢è±¡å‡ºç°ï¼Œåæ¥æ¼”å˜ä¸ºæ¸©é¡ºçš„å®¶çŒ«ã€‚å¥¹ä¿æŠ¤å®¶åº­å…å—é‚ªçµå’Œç–¾ç—…çš„ä¾µå®³ï¼Œæ˜¯é‡è¦çš„å®ˆæŠ¤ç¥ã€‚',
    attributes: { 'è±¡å¾': 'çŒ«ã€å‰é“ƒã€ç¯®å­', 'å´‡æ‹œä¸­å¿ƒ': 'å¸ƒå·´æ–¯ææ–¯', 'åŠ¨ç‰©': 'çŒ«', 'å¤´è¡”': 'ä¸‹åŸƒåŠçš„ä¿æŠ¤è€…' },
    roles: ['å®¶åº­ä¿æŠ¤', 'ç”Ÿè‚²', 'éŸ³ä¹', 'çŒ«å’ª'],
    relations: [
      { type: 'çˆ¶äº²', name: 'Ra', zh: 'æ‹‰' },
      { type: 'å…„å¼Ÿï¼ˆä¸€è¯´ï¼‰', name: 'Thoth', zh: 'æ‰˜ç‰¹' }
    ],
    blessings: ['å®¶åº­å¹³å®‰', 'ç”Ÿè‚²ä¸å¥åº·', 'æŠµå¾¡ç–¾ç—…é‚ªçµ']
  },
  {
    id: 'nephthys', name: 'Nephthys', zh: 'å¥ˆèŠ™è’‚æ–¯', emoji: 'ğŸŒ™',
    domain: 'å“€æ‚¼', domainEn: 'MOURNING',
    color: '#1A3A5C',
    desc: 'å¥ˆèŠ™è’‚æ–¯æ˜¯å“€æ‚¼ä¸å¤œæ™šçš„å¥³ç¥ï¼Œå¥¥è¥¿é‡Œæ–¯çš„å¦¹å¦¹ï¼Œèµ›ç‰¹çš„å§å¦¹å’Œå¦»å­ã€‚å°½ç®¡ä¸èµ›ç‰¹ä¸ºä¼ï¼Œå¥¹ä»ååŠ©ä¼Šè¥¿æ–¯å¯»æ‰¾å¹¶å¤æ´»å¥¥è¥¿é‡Œæ–¯ï¼Œæ˜¯æ­»è€…çš„ä¿æŠ¤è€…ã€‚',
    attributes: { 'è±¡å¾': 'æˆ¿å±‹ç¬¦å·ã€ç¿…è†€', 'å´‡æ‹œä¸­å¿ƒ': 'å¡æ¯”å°¼æ‰˜æ–¯', 'åŠ¨ç‰©': 'é¸¢', 'å±æ€§': 'é»‘æš—ä¸å¤œæ™š' },
    roles: ['å“€æ‚¼', 'ä¿æŠ¤', 'å¤œæ™š', 'é­”æ³•'],
    relations: [
      { type: 'å§å¦¹', name: 'Isis', zh: 'ä¼Šè¥¿æ–¯' },
      { type: 'ä¸ˆå¤«', name: 'Set', zh: 'èµ›ç‰¹' },
      { type: 'å…„å¼Ÿ', name: 'Osiris', zh: 'å¥¥è¥¿é‡Œæ–¯' }
    ],
    blessings: ['é€è€…å®‰æ…°', 'å¤œæ™šä¿æŠ¤', 'å®¶å®…å®ˆæŠ¤']
  },
  {
    id: 'ptah', name: 'Ptah', zh: 'æ™®å¡”', emoji: 'ğŸ›ï¸',
    domain: 'åˆ›é€ ', domainEn: 'CREATION',
    color: '#2A4060',
    desc: 'æ™®å¡”æ˜¯åˆ›é€ ä¹‹ç¥ï¼Œå·¥åŒ ã€è‰ºæœ¯å®¶å’Œå»ºç­‘å¸ˆçš„å®ˆæŠ¤ç¥ã€‚å­Ÿè²æ–¯ç¥å­¦è®¤ä¸ºä»–é€šè¿‡å¿ƒæ„ï¼ˆæ€æƒ³ï¼‰å’Œå£å¤´ï¼ˆè¨€è¯­ï¼‰åˆ›é€ äº†ä¸‡ç‰©ã€‚ä»–é€šå¸¸è¢«æç»˜ä¸ºæœ¨ä¹ƒä¼Šå½¢æ€ã€‚',
    attributes: { 'è±¡å¾': 'æƒæ–ã€è¿ªå¾·æŸ±', 'å´‡æ‹œä¸­å¿ƒ': 'å­Ÿè²æ–¯', 'åŠ¨ç‰©': 'å…¬ç‰›ï¼ˆé˜¿åŒ¹æ–¯ï¼‰', 'å¤´è¡”': 'ç¾çš„ä¸»äºº' },
    roles: ['åˆ›é€ ', 'å·¥è‰º', 'è‰ºæœ¯', 'å»ºç­‘'],
    relations: [
      { type: 'å¦»å­', name: 'Hathor', zh: 'å“ˆæ‰˜å°”ï¼ˆä¸€è¯´ï¼‰' }
    ],
    blessings: ['å·¥è‰ºä¸åˆ›é€ ', 'è‰ºæœ¯å®¶åº‡æŠ¤', 'åŸå¸‚ç¹è£']
  },
  {
    id: 'sekhmet', name: 'Sekhmet', zh: 'èµ›å…‹è¿ˆç‰¹', emoji: 'ğŸ¦',
    domain: 'æˆ˜äº‰', domainEn: 'WAR',
    color: '#8B4020',
    desc: 'èµ›å…‹è¿ˆç‰¹æ˜¯ç‹®é¦–å¥³ç¥ï¼Œæˆ˜äº‰ä¸æ²»æ„ˆä¹‹ç¥ã€‚å¥¹æ˜¯æ‹‰çš„å¤ä»‡ä¹‹çœ¼ï¼Œæ›¾è¢«æ´¾å»æƒ©ç½šäººç±»ã€‚å¥¹çš„å‘¼å¸åˆ›é€ äº†æ²™æ¼ ï¼Œå¥¹çš„åŠ›é‡èƒ½ä¼ æ’­ç–¾ç—…ä¹Ÿèƒ½æ²»æ„ˆç–¾ç—…ã€‚',
    attributes: { 'è±¡å¾': 'å¤ªé˜³åœ†ç›˜ä¸è›‡å½¢å† ', 'å´‡æ‹œä¸­å¿ƒ': 'å­Ÿè²æ–¯', 'åŠ¨ç‰©': 'ç‹®å­', 'å¤´è¡”': 'å¼ºå¤§è€…' },
    roles: ['æˆ˜äº‰', 'ç–¾ç—…', 'æ²»æ„ˆ', 'åŠ›é‡'],
    relations: [
      { type: 'ä¸ˆå¤«', name: 'Ptah', zh: 'æ™®å¡”' },
      { type: 'åŒ–èº«ä¹‹ä¸€', name: 'Hathor', zh: 'å“ˆæ‰˜å°”' }
    ],
    blessings: ['æˆ˜å£«ä¿æŠ¤', 'ç–¾ç—…æ²»æ„ˆ', 'æ•Œäººæƒ©ç½š']
  }
];

const BLESSINGS = [
  { icon: 'â˜€ï¸', title: 'é•¿å¯¿ä¸å¥åº·', gods: 'Ra Â· Sekhmet Â· Isis', desc: 'å‘æ‹‰ç¥ç¥ˆæ±‚ç”Ÿå‘½æ´»åŠ›ï¼Œå‘ä¼Šè¥¿æ–¯ç¥ˆæ±‚æ²»æ„ˆï¼Œå‘èµ›å…‹è¿ˆç‰¹ç¥ˆæ±‚èº«ä½“å¼ºå¥ã€‚å¤åŸƒåŠäººåœ¨å¤ªé˜³å‡èµ·æ—¶å‘ä¸œæ–¹ç¥ˆç¥·ï¼Œä¿ä½‘å®¶äººå¥åº·é•¿å¯¿ã€‚' },
  { icon: 'ğŸŒŠ', title: 'å°¼ç½—æ²³ä¸°æ”¶', gods: 'Osiris Â· Hapy Â· Isis', desc: 'å¥¥è¥¿é‡Œæ–¯çš„ç»¿è‰²ä¹‹ä½“è±¡å¾å°¼ç½—æ²³æ³¥åœŸçš„è‚¥æ²ƒã€‚æ¯å¹´æ´ªæ°´å­£èŠ‚ï¼Œç¥­å¸ä¸¾è¡Œä»ªå¼ç¥ˆæ±‚å“ˆæ¯”ç¥ï¼ˆæ´ªæ°´ç¥ï¼‰å¸¦æ¥é€‚åº¦çš„å°¼ç½—æ²³æ³›æ»¥ï¼Œç¡®ä¿å†œä¸šä¸°æ”¶ã€‚' },
  { icon: 'ğŸ¦…', title: 'æ³•è€ç‹æƒ', gods: 'Horus Â· Ra Â· Ptah', desc: 'è·é²æ–¯ä¹‹çœ¼æ˜¯ç‹æƒçš„è±¡å¾ï¼Œæ³•è€è¢«è§†ä¸ºæ´»ç€çš„è·é²æ–¯ã€‚ç‹æƒå¾—åˆ°ä¼—ç¥åº‡ä½‘ï¼Œæ‹‰èµ‹äºˆç»Ÿæ²»çš„å…‰è¾‰ï¼Œæ™®å¡”èµ‹äºˆå»ºè®¾çš„åŠ›é‡ã€‚' },
  { icon: 'ğŸ’€', title: 'å®‰å…¨è¿›å…¥æ¥ä¸–', gods: 'Anubis Â· Osiris Â· Thoth', desc: 'é˜¿åŠªæ¯”æ–¯å¼•å¯¼äº¡é­‚ï¼Œç§°é‡å…¶å¿ƒè„æ˜¯å¦æ¯”é©¬ç‰¹ä¹‹ç¾½è½»ã€‚å¥¥è¥¿é‡Œæ–¯ä¸»æŒå®¡åˆ¤ï¼Œæ‰˜ç‰¹è®°å½•ç»“æœã€‚é€šè¿‡å®¡åˆ¤è€…å¾—ä»¥è¿›å…¥é˜¿é²ï¼ˆå¤©å ‚ä¹‹åœ°ï¼‰ã€‚' },
  { icon: 'ğŸ ', title: 'å®¶åº­ä¸ç”Ÿè‚²', gods: 'Hathor Â· Bastet Â· Taweret', desc: 'å“ˆæ‰˜å°”æŠ¤ä½‘å©šå§»ç¾æ»¡ï¼ŒèŠ­ä¸ç‰¹ä¿æŠ¤å®¶åº­å¹³å®‰ï¼Œå¡”æ²ƒé›·ç‰¹ï¼ˆæ²³é©¬å¥³ç¥ï¼‰å®ˆæŠ¤å­•å¦‡ä¸æ–°ç”Ÿå„¿ã€‚å®¶ä¸­å¸¸ä¾›å¥‰è¿™äº›ç¥çµçš„å°åƒã€‚' },
  { icon: 'ğŸ“š', title: 'çŸ¥è¯†ä¸ä¹¦å†™', gods: 'Thoth Â· Seshat', desc: 'æ‰˜ç‰¹æ˜¯æ™ºæ…§ä¸ä¹¦å†™çš„ç¥åœ£ä¿æŠ¤è€…ï¼Œæ®è¯´ä»–å°†è±¡å½¢æ–‡å­—èµäºˆäººç±»ã€‚ä¹¦è®°å®˜å’Œå­¦è€…å‘ä»–ç¥ˆæ±‚æ¸…æ™°çš„æ€ç»´å’Œæµç•…çš„ä¹¦å†™èƒ½åŠ›ã€‚' },
  { icon: 'âš”ï¸', title: 'æˆ˜äº‰ä¸èƒœåˆ©', gods: 'Horus Â· Sekhmet Â· Montu', desc: 'æˆ˜äº‰æ—¶æœŸï¼Œå£«å…µå‘è·é²æ–¯ç¥ˆæ±‚é¹°çœ¼èˆ¬çš„æˆ˜ç•¥çœ¼å…‰ï¼Œå‘èµ›å…‹è¿ˆç‰¹ç¥ˆæ±‚ç‹®å­èˆ¬çš„åŠ›é‡ï¼Œå‘è’™å›¾ï¼ˆæˆ˜ç¥ï¼‰ç¥ˆæ±‚æˆ˜åœºèƒœåˆ©ã€‚' },
  { icon: 'ğŸŒ™', title: 'å¤œæ™šä¸æ¢¦å¢ƒ', gods: 'Thoth Â· Nephthys Â· Khonsu', desc: 'æ‰˜ç‰¹å®ˆæŠ¤æœˆå¤œï¼Œå¥ˆèŠ™è’‚æ–¯åº‡æŠ¤é»‘æš—ä¸­çš„æ—…äººã€‚å­”è‹ï¼ˆæœˆç¥ï¼‰ä¿æŠ¤å¤œé—´æ—…è¡Œè€…å¹¶é€æ¥å‰ç¥¥çš„æ¢¦å¢ƒï¼Œé©±æ•£æ¶æ¢¦å’Œå¤œè¡Œæ¶çµã€‚' },
  { icon: 'ğŸŒŠ', title: 'èˆªæµ·ä¸è´¸æ˜“', gods: 'Isis Â· Horus Â· Sobek', desc: 'ä¼Šè¥¿æ–¯æ˜¯æ°´æ‰‹çš„å®ˆæŠ¤ç¥ï¼Œå¥¹å±•å¼€çš„ç¿…è†€å¦‚åŒèˆ¹å¸†ã€‚è·é²æ–¯ä¹‹çœ¼ç»˜åœ¨èˆ¹å¤´é©±é‚ªï¼Œç´¢è´å…‹ï¼ˆé³„é±¼ç¥ï¼‰å¹³æ¯æ°´ä¸­å±é™©ã€‚' },
];

const MYTHS = [
  {
    num: 'MYTH I',
    title: 'å¥¥è¥¿é‡Œæ–¯çš„æ­»ä¸å¤æ´»',
    gods: ['Osiris', 'Isis', 'Set', 'Horus'],
    body: 'èµ›ç‰¹å«‰å¦’å…„é•¿å¥¥è¥¿é‡Œæ–¯çš„ç»Ÿæ²»ï¼Œè®¾è®¡å°†å…¶éª—å…¥æœ¨æ£ºï¼Œæ²‰å…¥å°¼ç½—æ²³ã€‚ä¼Šè¥¿æ–¯éå¯»å¤©ä¸‹ï¼Œæ‰¾å›ä¸ˆå¤«é—ä½“ï¼Œå´è¢«èµ›ç‰¹åˆ†æˆ14å—æ•£å¸ƒå„åœ°ã€‚ä¼Šè¥¿æ–¯ä¸å§å¦¹å¥ˆèŠ™è’‚æ–¯ä»¥é­”æ³•æ”¶é›†æ®‹è‚¢ï¼Œä»¥ç¬¬ä¸€æ¬¡é˜²è…æœ¯å¤æ´»äº†å¥¥è¥¿é‡Œæ–¯ï¼Œä½¿å…¶æˆä¸ºå†¥ç•Œä¹‹ç‹ã€‚ä»–ä»¬çš„å„¿å­è·é²æ–¯é•¿å¤§åï¼Œä¸èµ›ç‰¹å±•å¼€äº†æ¼«é•¿çš„ç»Ÿæ²»æƒä¹‹äº‰ã€‚'
  },
  {
    num: 'MYTH II',
    title: 'åˆ›ä¸–ç¥è¯â€”â€”èµ«åˆ©å¥¥æ³¢åˆ©æ–¯',
    gods: ['Ra'],
    body: 'åœ¨æœ€åˆçš„æ··æ²Œä¹‹æ°´ï¼ˆåŠªæ©ï¼‰ä¸­ï¼Œå¤ªé˜³ç¥é˜¿å›¾å§†ï¼ˆæ‹‰çš„æ—©æœŸå½¢æ€ï¼‰ç«™åœ¨åŸå§‹å±±ä¸˜ä¸Šï¼Œä»¥è‡ªèº«ä¹‹åŠ›åˆ›é€ äº†ç¬¬ä¸€å¯¹ç¥çµâ€”â€”èˆ’ï¼ˆç©ºæ°”ä¹‹ç¥ï¼‰ä¸æ³°èŠ™åŠªç‰¹ï¼ˆæ¹¿æ°”å¥³ç¥ï¼‰ã€‚ä»–ä»¬ç”Ÿä¸‹ç›–å¸ƒï¼ˆå¤§åœ°ï¼‰ä¸åŠªç‰¹ï¼ˆå¤©ç©ºï¼‰ã€‚åŠªç‰¹å’Œç›–å¸ƒç”Ÿä¸‹å¥¥è¥¿é‡Œæ–¯ã€èµ›ç‰¹ã€ä¼Šè¥¿æ–¯å’Œå¥ˆèŠ™è’‚æ–¯ï¼Œæ„æˆäº†åŸƒåŠç¥çµçš„æ ¸å¿ƒä¹ç¥ä½“ç³»ï¼ˆå¤§ä¹ç¥å›¢ï¼‰ã€‚'
  },
  {
    num: 'MYTH III',
    title: 'è·é²æ–¯ä¹‹çœ¼çš„æ•…äº‹',
    gods: ['Horus', 'Set', 'Thoth'],
    body: 'è·é²æ–¯ä¸èµ›ç‰¹äº‰å¤ºåŸƒåŠç»Ÿæ²»æƒçš„æ¼«é•¿æˆ˜æ–—ä¸­ï¼Œèµ›ç‰¹æŒ–å»äº†è·é²æ–¯çš„ä¸€åªçœ¼ç›å¹¶å°†å…¶åˆ†æˆå…­ä»½ã€‚æ‰˜ç‰¹ç¥ä»¥é­”æ³•å°†çœ¼ç›å¤åŸï¼Œè¿™åªç¥åœ£çš„çœ¼ç›è¢«ç§°ä¸º"ç“¦å‰ç‰¹çœ¼"ï¼Œæˆä¸ºæ²»æ„ˆã€ä¿æŠ¤ä¸å®Œæ•´çš„è±¡å¾ã€‚æ—¶è‡³ä»Šæ—¥ï¼Œè·é²æ–¯ä¹‹çœ¼ä»æ˜¯æœ€è‘—åçš„åŸƒåŠæŠ¤èº«ç¬¦ä¹‹ä¸€ã€‚'
  },
  {
    num: 'MYTH IV',
    title: 'æ‹‰ç¥ä¸äººç±»çš„æ•…äº‹',
    gods: ['Ra', 'Sekhmet', 'Hathor'],
    body: 'æ®ä¼ æ‹‰ç¥å¹´è€æ—¶ï¼Œå¬è¯´äººç±»åœ¨å¯†è°‹åå¯¹ä»–ï¼Œäºæ˜¯æ´¾å‡ºè‡ªå·±çš„çœ¼ç›â€”â€”å¥³ç¥å“ˆæ‰˜å°”ï¼Œä»¥èµ›å…‹è¿ˆç‰¹ï¼ˆç‹®é¦–å¥³ç¥ï¼‰çš„å½¢æ€é™ä¸´æƒ©ç½šäººç±»ã€‚èµ›å…‹è¿ˆç‰¹æ²‰æµ¸äºæ€æˆ®ï¼Œæ— æ³•åœæ­¢ã€‚æ‹‰ç¥ä¸ºäº†æ‹¯æ•‘å¹¸å­˜çš„äººç±»ï¼Œå‘½äººå°†å¤§é‡çº¢è‰²å•¤é…’æ³¼åœ¨åœ°ä¸Šï¼Œèµ›å…‹è¿ˆç‰¹è¯¯ä»¥ä¸ºæ˜¯è¡€ï¼Œå–é†‰åæ¢å¤äº†å¹³é™ï¼Œäººç±»å› æ­¤å¾—æ•‘ã€‚'
  },
  {
    num: 'MYTH V',
    title: 'æ‰˜ç‰¹ä¸æœˆäº®æ—¶å…‰',
    gods: ['Thoth', 'Ra'],
    body: 'å¤æ—¶å€™ä¸€å¹´åªæœ‰360å¤©ï¼ŒåŠªç‰¹ï¼ˆå¤©ç©ºå¥³ç¥ï¼‰è¢«ç¦æ­¢åœ¨ä»»ä½•æœˆä»½ç”Ÿè‚²ã€‚æ‰˜ç‰¹ä¸æœˆç¥èµŒåšï¼Œèµ¢å¾—äº†360å¤©çš„1/72ï¼Œå…±5å¤©æ—¶å…‰ã€‚è¿™5å¤©æ—¢ä¸å±äºä»»ä½•æœˆä»½ï¼Œäºæ˜¯åŠªç‰¹åœ¨è¿™5å¤©ä¸­ä¾æ¬¡ç”Ÿä¸‹äº†å¥¥è¥¿é‡Œæ–¯ã€è·é²æ–¯é•¿å­ã€èµ›ç‰¹ã€ä¼Šè¥¿æ–¯å’Œå¥ˆèŠ™è’‚æ–¯ï¼Œä»æ­¤ä¸€å¹´æœ‰äº†365å¤©ã€‚'
  },
  {
    num: 'MYTH VI',
    title: 'å†¥ç•Œå®¡åˆ¤â€”â€”å¿ƒè„ç§°é‡',
    gods: ['Anubis', 'Osiris', 'Thoth'],
    body: 'æ¯ä¸ªäº¡è€…æ­»åï¼Œé˜¿åŠªæ¯”æ–¯å¼•å¯¼å…¶çµé­‚å‰å¾€æœé˜¿ç‰¹ï¼ˆå†¥ç•Œï¼‰çš„å®¡åˆ¤å…ã€‚äº¡è€…çš„å¿ƒè„è¢«æ”¾åœ¨å¤©å¹³ä¸€ç«¯ï¼Œå¦ä¸€ç«¯æ˜¯ä»£è¡¨çœŸç†ä¸æ­£ä¹‰çš„é©¬ç‰¹ä¹‹ç¾½ã€‚æ‰˜ç‰¹è®°å½•ç»“æœã€‚è‹¥å¿ƒè„è½»äºç¾½æ¯›ï¼Œäº¡è€…å¾—ä»¥è¿›å…¥é˜¿é²å¤©å ‚ï¼›è‹¥å¿ƒè„è¢«ç½ªæ¶æ‰€é‡ï¼Œä¾¿ä¼šè¢«é˜¿ç±³ç‰¹ï¼ˆé³„é±¼ç‹®ç‹’æ··åˆæ€ªï¼‰åé£Ÿï¼Œçµé­‚å½»åº•æ¶ˆç­ã€‚'
  },
];

// ===== RENDER =====
function init() {
  createStars();
  renderPantheon();
  renderBlessings();
  renderMyths();
  setupDomainFilters();
}

function createStars() {
  const container = document.getElementById('stars');
  for (let i = 0; i < 120; i++) {
    const s = document.createElement('div');
    s.className = 'star';
    s.style.cssText = `
      left: ${Math.random() * 100}%;
      top: ${Math.random() * 100}%;
      --d: ${2 + Math.random() * 4}s;
      --delay: ${-Math.random() * 5}s;
      --o: ${0.3 + Math.random() * 0.7};
      width: ${1 + Math.random() * 2}px;
      height: ${1 + Math.random() * 2}px;
    `;
    container.appendChild(s);
  }
}

const DOMAINS = ['å…¨éƒ¨', 'å¤ªé˜³', 'æ­»äº¡', 'é­”æ³•', 'å¤©ç©º', 'æ™ºæ…§', 'æ··ä¹±', 'äº¡è€…', 'çˆ±ä¸ç¾', 'çŒ«ä¸å®¶', 'å“€æ‚¼', 'åˆ›é€ ', 'æˆ˜äº‰'];

function setupDomainFilters() {
  const row = document.getElementById('domain-filters');
  DOMAINS.forEach((d, i) => {
    const btn = document.createElement('button');
    btn.className = 'filter-pill' + (i === 0 ? ' active' : '');
    btn.textContent = d;
    btn.onclick = () => {
      document.querySelectorAll('.filter-pill').forEach(p => p.classList.remove('active'));
      btn.classList.add('active');
      filterGods(d);
    };
    row.appendChild(btn);
  });
}

function filterGods(domain) {
  document.querySelectorAll('.god-card').forEach(card => {
    if (domain === 'å…¨éƒ¨' || card.dataset.domain === domain) {
      card.style.display = '';
    } else {
      card.style.display = 'none';
    }
  });
}

function renderPantheon() {
  const grid = document.getElementById('pantheon-grid');
  GODS.forEach((god, i) => {
    const card = document.createElement('div');
    card.className = 'god-card animate-in';
    card.dataset.domain = god.domain;
    card.style.animationDelay = `${i * 0.06}s`;
    card.innerHTML = `
      <div class="god-avatar" style="background: linear-gradient(145deg, ${god.color}22, #000)">
        ${god.emoji}
        <span class="god-domain-badge" style="color:${god.color}; border-color:${god.color}44">${god.domainEn}</span>
      </div>
      <div class="god-info">
        <div class="god-name">${god.name}</div>
        <div class="god-name-zh">${god.zh}</div>
        <div class="god-tags">${god.roles.map(r => `<span class="god-tag">${r}</span>`).join('')}</div>
      </div>
    `;
    card.onclick = () => openGodModal(god);
    grid.appendChild(card);
  });
}

function renderBlessings() {
  const grid = document.getElementById('blessings-grid');
  BLESSINGS.forEach((b, i) => {
    const card = document.createElement('div');
    card.className = 'blessing-card';
    card.innerHTML = `
      <div class="blessing-icon">${b.icon}</div>
      <div class="blessing-title">${b.title}</div>
      <div class="blessing-gods">${b.gods}</div>
      <div class="blessing-desc">${b.desc}</div>
    `;
    grid.appendChild(card);
  });
}

function renderMyths() {
  const container = document.getElementById('myth-cards');
  MYTHS.forEach(myth => {
    const card = document.createElement('div');
    card.className = 'myth-card';
    card.innerHTML = `
      <div class="myth-header">
        <div class="myth-num">${myth.num}</div>
        <div class="myth-title">${myth.title}</div>
      </div>
      <div class="myth-body">${myth.body}</div>
      <div class="myth-gods-row">
        ${myth.gods.map(g => {
          const god = GODS.find(x => x.id === g.toLowerCase()) || { name: g, zh: '' };
          return `<span class="myth-god-chip" onclick="openGodById('${god.id || g}')">${god.emoji || ''} ${god.name || g}</span>`;
        }).join('')}
      </div>
    `;
    container.appendChild(card);
  });
}

function openGodModal(god) {
  const header = document.getElementById('modal-header');
  const body = document.getElementById('modal-body');
  
  header.innerHTML = `
    <div class="modal-avatar">${god.emoji}</div>
    <div>
      <div class="modal-title">${god.name}</div>
      <div class="modal-subtitle">${god.zh} Â· ${god.domain}ä¹‹ç¥</div>
    </div>
  `;
  
  const attrsHtml = Object.entries(god.attributes).map(([k, v]) => `
    <div class="attr-item">
      <div class="attr-label">${k}</div>
      <div class="attr-value">${v}</div>
    </div>
  `).join('');
  
  const relHtml = god.relations.map(r => {
    const related = GODS.find(g => g.name === r.name);
    return `
      <div class="relation-item">
        <span class="relation-type" style="color: ${r.type.includes('æ•Œ') ? '#8B2020' : '#1A7A6E'}">${r.type}</span>
        <span class="relation-name" onclick="openGodByName('${r.name}')">${r.name} (${r.zh})</span>
      </div>
    `;
  }).join('');
  
  body.innerHTML = `
    <div class="modal-section">
      <div class="modal-section-title">ğ“‚€ ç¥è¯æè¿°</div>
      <p>${god.desc}</p>
    </div>
    <div class="modal-section">
      <div class="modal-section-title">ğ“ ç¥çµå±æ€§</div>
      <div class="attr-grid">${attrsHtml}</div>
    </div>
    <div class="modal-section">
      <div class="modal-section-title">ğ“†£ ç¥çµå…³ç³»</div>
      <div class="relations-list">${relHtml}</div>
    </div>
    <div class="modal-section">
      <div class="modal-section-title">ğ“Š– åº‡ä½‘é¢†åŸŸ</div>
      <p>${god.blessings.join(' Â· ')}</p>
    </div>
  `;
  
  document.getElementById('modal-overlay').classList.add('open');
}

function openGodByName(name) {
  const god = GODS.find(g => g.name === name);
  if (god) openGodModal(god);
}

function openGodById(id) {
  const god = GODS.find(g => g.id === id.toLowerCase());
  if (god) openGodModal(god);
}

function closeModal(e) {
  if (!e || e.target === document.getElementById('modal-overlay') || e.currentTarget.classList.contains('modal-close')) {
    document.getElementById('modal-overlay').classList.remove('open');
  }
}

// ===== TAB SWITCHING =====
function switchTab(name) {
  document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
  document.querySelectorAll('.nav-tab').forEach(el => el.classList.remove('active'));
  document.getElementById('tab-' + name).classList.add('active');
  event.currentTarget.classList.add('active');
  
  if (name === 'relations') {
    setTimeout(drawRelationGraph, 50);
  }
}

// ===== RELATION GRAPH =====
let graphNodes = [];
let graphEdges = [];
let animFrame;

const EDGES = [
  { from: 'osiris', to: 'isis', type: 'family', label: 'é…å¶' },
  { from: 'osiris', to: 'horus', type: 'family', label: 'çˆ¶å­' },
  { from: 'osiris', to: 'set', type: 'enemy', label: 'å…„å¼Ÿ/å¯¹ç«‹' },
  { from: 'osiris', to: 'nephthys', type: 'family', label: 'å§å¼Ÿ' },
  { from: 'isis', to: 'horus', type: 'family', label: 'æ¯å­' },
  { from: 'isis', to: 'nephthys', type: 'family', label: 'å§å¦¹' },
  { from: 'isis', to: 'thoth', type: 'ally', label: 'åŒç›Ÿ' },
  { from: 'ra', to: 'horus', type: 'ally', label: 'åŒ–èº«' },
  { from: 'ra', to: 'thoth', type: 'family', label: 'çˆ¶å­' },
  { from: 'ra', to: 'bastet', type: 'family', label: 'çˆ¶å¥³' },
  { from: 'horus', to: 'set', type: 'enemy', label: 'å¯¹ç«‹' },
  { from: 'thoth', to: 'anubis', type: 'ally', label: 'å…±äº‹' },
  { from: 'anubis', to: 'osiris', type: 'ally', label: 'ä¾å¥‰' },
  { from: 'set', to: 'nephthys', type: 'family', label: 'é…å¶' },
  { from: 'ptah', to: 'sekhmet', type: 'family', label: 'é…å¶' },
  { from: 'hathor', to: 'ra', type: 'ally', label: 'æ‹‰ä¹‹çœ¼' },
  { from: 'sekhmet', to: 'hathor', type: 'ally', label: 'åŒ–èº«' },
];

function drawRelationGraph() {
  const canvas = document.getElementById('relation-canvas');
  const wrap = document.getElementById('relation-canvas-wrap');
  canvas.width = wrap.offsetWidth;
  canvas.height = wrap.offsetHeight;
  const ctx = canvas.getContext('2d');
  const W = canvas.width, H = canvas.height;
  
  // Layout nodes in a force-directed-like circle arrangement
  if (graphNodes.length === 0) {
    const N = GODS.length;
    graphNodes = GODS.map((g, i) => {
      const angle = (i / N) * Math.PI * 2 - Math.PI / 2;
      const r = Math.min(W, H) * 0.32;
      return {
        id: g.id,
        god: g,
        x: W / 2 + Math.cos(angle) * r,
        y: H / 2 + Math.sin(angle) * r,
        vx: 0, vy: 0,
        radius: 26,
      };
    });
  }
  
  graphEdges = EDGES.map(e => ({
    ...e,
    source: graphNodes.find(n => n.id === e.from),
    target: graphNodes.find(n => n.id === e.to),
  })).filter(e => e.source && e.target);
  
  let hoveredNode = null;
  let dragging = null;
  let mouseX = 0, mouseY = 0;
  
  function getEdgeColor(type) {
    if (type === 'family') return '#C9A84C';
    if (type === 'ally') return '#1A7A6E';
    return '#8B2020';
  }
  
  function draw() {
    ctx.clearRect(0, 0, W, H);
    
    // Draw edges
    graphEdges.forEach(e => {
      const highlight = hoveredNode && (e.source.id === hoveredNode.id || e.target.id === hoveredNode.id);
      ctx.beginPath();
      ctx.moveTo(e.source.x, e.source.y);
      ctx.lineTo(e.target.x, e.target.y);
      ctx.strokeStyle = getEdgeColor(e.type);
      ctx.lineWidth = highlight ? 2.5 : 1;
      ctx.globalAlpha = highlight ? 0.9 : 0.25;
      if (e.type === 'enemy') {
        ctx.setLineDash([6, 4]);
      } else {
        ctx.setLineDash([]);
      }
      ctx.stroke();
      ctx.setLineDash([]);
      ctx.globalAlpha = 1;
      
      // Edge label on hover
      if (highlight) {
        const mx = (e.source.x + e.target.x) / 2;
        const my = (e.source.y + e.target.y) / 2;
        ctx.font = '10px Cinzel, serif';
        ctx.fillStyle = getEdgeColor(e.type);
        ctx.globalAlpha = 0.8;
        ctx.textAlign = 'center';
        ctx.fillText(e.label, mx, my - 4);
        ctx.globalAlpha = 1;
      }
    });
    
    // Draw nodes
    graphNodes.forEach(node => {
      const isHovered = hoveredNode && hoveredNode.id === node.id;
      const isRelated = hoveredNode && graphEdges.some(e => 
        (e.source.id === hoveredNode.id && e.target.id === node.id) ||
        (e.target.id === hoveredNode.id && e.source.id === node.id)
      );
      
      // Glow
      if (isHovered || isRelated) {
        const grd = ctx.createRadialGradient(node.x, node.y, 0, node.x, node.y, node.radius * 2.5);
        grd.addColorStop(0, isHovered ? 'rgba(201,168,76,0.4)' : 'rgba(201,168,76,0.15)');
        grd.addColorStop(1, 'transparent');
        ctx.beginPath();
        ctx.arc(node.x, node.y, node.radius * 2.5, 0, Math.PI * 2);
        ctx.fillStyle = grd;
        ctx.fill();
      }
      
      // Circle background
      ctx.beginPath();
      ctx.arc(node.x, node.y, node.radius, 0, Math.PI * 2);
      ctx.fillStyle = node.god.color + (isHovered ? 'AA' : '44');
      ctx.fill();
      ctx.strokeStyle = isHovered ? node.god.color : 'rgba(201,168,76,0.4)';
      ctx.lineWidth = isHovered ? 2 : 1;
      ctx.stroke();
      
      // Emoji
      ctx.font = `${isHovered ? 22 : 18}px serif`;
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText(node.god.emoji, node.x, node.y - 2);
      
      // Name
      ctx.font = `${isHovered ? 11 : 9}px Cinzel, serif`;
      ctx.fillStyle = isHovered ? '#F0D080' : 'rgba(201,168,76,0.7)';
      ctx.textBaseline = 'top';
      ctx.fillText(node.god.name, node.x, node.y + node.radius + 4);
    });
  }
  
  canvas.onmousemove = (e) => {
    const rect = canvas.getBoundingClientRect();
    mouseX = e.clientX - rect.left;
    mouseY = e.clientY - rect.top;
    
    if (dragging) {
      dragging.x = mouseX;
      dragging.y = mouseY;
    }
    
    hoveredNode = graphNodes.find(n => {
      const dx = n.x - mouseX, dy = n.y - mouseY;
      return Math.sqrt(dx*dx + dy*dy) < n.radius + 6;
    }) || null;
    
    canvas.style.cursor = hoveredNode ? 'pointer' : 'default';
    
    const tt = document.getElementById('canvas-tooltip');
    if (hoveredNode) {
      tt.style.display = 'block';
      tt.style.left = (mouseX + 14) + 'px';
      tt.style.top = (mouseY - 10) + 'px';
      tt.innerHTML = `${hoveredNode.god.emoji} ${hoveredNode.god.name}<br><span style="color:#D4C4A0;font-size:10px">${hoveredNode.god.zh} Â· ${hoveredNode.god.domain}ä¹‹ç¥</span>`;
    } else {
      tt.style.display = 'none';
    }
    
    draw();
  };
  
  canvas.onmousedown = (e) => {
    const rect = canvas.getBoundingClientRect();
    const mx = e.clientX - rect.left, my = e.clientY - rect.top;
    dragging = graphNodes.find(n => {
      const dx = n.x - mx, dy = n.y - my;
      return Math.sqrt(dx*dx + dy*dy) < n.radius + 6;
    }) || null;
  };
  
  canvas.onmouseup = (e) => {
    const rect = canvas.getBoundingClientRect();
    const mx = e.clientX - rect.left, my = e.clientY - rect.top;
    const clicked = graphNodes.find(n => {
      const dx = n.x - mx, dy = n.y - my;
      return Math.sqrt(dx*dx + dy*dy) < n.radius + 6;
    });
    if (clicked && !dragging?.moved) openGodModal(clicked.god);
    dragging = null;
  };
  
  canvas.onmouseleave = () => {
    hoveredNode = null;
    dragging = null;
    document.getElementById('canvas-tooltip').style.display = 'none';
    draw();
  };
  
  draw();
}

init();
</script>
<script src="../../../assets/js/data-bind.js"></script>
  <script src="../../../assets/js/edit-mode.js"></script>
</body>
</html>
